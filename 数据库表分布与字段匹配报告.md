# æ•°æ®åº“è¡¨åˆ†å¸ƒä¸å­—æ®µåŒ¹é…æŠ¥å‘Šï¼ˆæ›´æ–°ç‰ˆï¼‰

**æ£€æŸ¥æ—¥æœŸ**: 2025å¹´10æœˆ14æ—¥  
**é‡è¦å‘ç°**: âœ… `edu_course_offering` è¡¨å­˜åœ¨äº `admin-end.sql` ä¸­

---

## ğŸ¯ ä¸€ã€é—®é¢˜æ¾„æ¸…

### âŒ ä¹‹å‰çš„è¯¯åˆ¤
> é”™è¯¯ï¼šè®¤ä¸º `edu_course_offering` è¡¨ä¸å­˜åœ¨

### âœ… å®é™…æƒ…å†µ
> æ­£ç¡®ï¼š`edu_course_offering` è¡¨**å­˜åœ¨**ï¼Œåªæ˜¯è¢«æ”¾åœ¨äº† `admin-end.sql` ä¸­

---

## ğŸ“ äºŒã€SQLæ–‡ä»¶è¡¨åˆ†å¸ƒ

### 2.1 æ–‡ä»¶ç»“æ„
```
å‚è€ƒ/
â”œâ”€â”€ admin-end.sql          (ç®¡ç†ç«¯ + æ’è¯¾ç®¡ç†)
â”‚   â””â”€â”€ edu_course_offering âœ… åœ¨è¿™é‡Œï¼
â”‚
â””â”€â”€ teacher-student-end.sql (æ•™å¸ˆç«¯ + å­¦ç”Ÿç«¯)
    â”œâ”€â”€ edu_student_course    (å¼•ç”¨ offering_id)
    â”œâ”€â”€ edu_teaching_schedule (å¼•ç”¨ offering_id)
    â”œâ”€â”€ edu_class_course      (å¼•ç”¨ offering_id)
    â””â”€â”€ prep_test_paper       (å¼•ç”¨ offering_id)
```

### 2.2 è¡¨å½’å±åˆ†æ

**admin-end.sql (ç®¡ç†ç«¯)** åŒ…å«ï¼š
- âœ… `edu_course_offering` - **è¯¾ç¨‹å¼€è®¾è¡¨** (æ’è¯¾ç»“æœ)
- ç³»ç»Ÿç®¡ç†è¡¨ (sys_user, sys_role ç­‰)
- æ’è¯¾ç®¡ç†è¡¨ (edu_teacher_preference, edu_exam_arrangement ç­‰)

**teacher-student-end.sql (æ•™å¸ˆ/å­¦ç”Ÿç«¯)** åŒ…å«ï¼š
- å­¦ç”Ÿç›¸å…³è¡¨ (edu_student, edu_student_course ç­‰)
- æ•™å¸ˆç›¸å…³è¡¨ (edu_teacher ç­‰)
- è¯¾ç¨‹åŸºç¡€è¡¨ (edu_course, edu_class ç­‰)

**è®¾è®¡é€»è¾‘**ï¼š
- ğŸ¯ **ç®¡ç†å‘˜**è´Ÿè´£æ’è¯¾ â†’ åˆ›å»º `edu_course_offering` è®°å½•
- ğŸ‘¨â€ğŸ“ **å­¦ç”Ÿ**æŸ¥çœ‹è¯¾è¡¨ â†’ è¯»å– `edu_course_offering` æ•°æ®
- ğŸ‘¨â€ğŸ« **æ•™å¸ˆ**æŸ¥çœ‹è¯¾è¡¨ â†’ è¯»å– `edu_course_offering` æ•°æ®

---

## âœ… ä¸‰ã€edu_course_offering è¡¨å®šä¹‰å¯¹æ¯”

### 3.1 admin-end.sql ä¸­çš„å®Œæ•´å®šä¹‰

```sql
CREATE TABLE edu_course_offering (
    offering_id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'å¼€è®¾ID',
    course_id INT NOT NULL COMMENT 'è¯¾ç¨‹ID',
    teacher_id INT COMMENT 'ä¸»è®²æ•™å¸ˆID',
    semester_id INT COMMENT 'å­¦æœŸID',
    class_id INT COMMENT 'ç­çº§ID',
    class_name VARCHAR(100) NOT NULL COMMENT 'æ•™å­¦ç­åç§°',
    classroom_id INT COMMENT 'æ•™å®¤ID',
    max_students INT DEFAULT 0 COMMENT 'æœ€å¤§é€‰è¯¾äººæ•°',
    current_students INT DEFAULT 0 COMMENT 'å½“å‰é€‰è¯¾äººæ•°',
    week_day TINYINT COMMENT 'æ˜ŸæœŸå‡ ï¼ˆ1-7ï¼‰',          âœ…
    start_period TINYINT COMMENT 'å¼€å§‹èŠ‚æ¬¡',            âœ…
    end_period TINYINT COMMENT 'ç»“æŸèŠ‚æ¬¡',              âœ…
    start_week INT COMMENT 'å¼€å§‹å‘¨',
    end_week INT COMMENT 'ç»“æŸå‘¨',
    week_type ENUM('EVERY','ODD','EVEN') DEFAULT 'EVERY' COMMENT 'å‘¨ç±»å‹',
    is_required TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'æ˜¯å¦å¿…ä¿®è¯¾',
    target_grades VARCHAR(200) COMMENT 'ç›®æ ‡å¹´çº§',
    target_majors VARCHAR(500) COMMENT 'ç›®æ ‡ä¸“ä¸š',
    status ENUM('NORMAL','SUSPENDED','RESCHEDULED') DEFAULT 'NORMAL' COMMENT 'çŠ¶æ€',
    create_time DATETIME COMMENT 'åˆ›å»ºæ—¶é—´',
    update_time DATETIME COMMENT 'æ›´æ–°æ—¶é—´',
    is_delete TINYINT(1) DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤ï¼ˆ0-æœªåˆ é™¤,1-å·²åˆ é™¤ï¼‰',
    delete_time DATETIME COMMENT 'åˆ é™¤æ—¶é—´'
) COMMENT='è¯¾ç¨‹å¼€è®¾è¡¨';
```

### 3.2 å‰ç«¯å­—æ®µåŒ¹é…æ£€æŸ¥

#### CourseSchedule.vue ä½¿ç”¨çš„å­—æ®µ

```javascript
const courses = ref([
  {
    offering_id: 1001,      // âœ… offering_id INT (ä¸»é”®)
    course_id: 501,         // âœ… course_id INT NOT NULL
    course_name: 'è®¡ç®—æœºç½‘ç»œ', // âš ï¸ å†—ä½™å­—æ®µ (æ¥è‡ª edu_course)
    teacher_id: 201,        // âœ… teacher_id INT
    teacher_name: 'å­”è€å¸ˆ',   // âš ï¸ å†—ä½™å­—æ®µ (æ¥è‡ª sys_user)
    week_day: 1,            // âœ… week_day TINYINT
    start_period: 1,        // âœ… start_period TINYINT
    end_period: 2,          // âœ… end_period TINYINT
    classroom_id: 301,      // âœ… classroom_id INT
    classroom_name: 'A301', // âš ï¸ å†—ä½™å­—æ®µ (æ¥è‡ª edu_classroom)
  }
]);
```

#### å­—æ®µåŒ¹é…è¯¦è¡¨

| å‰ç«¯å­—æ®µ | æ•°æ®åº“è¡¨ | æ•°æ®åº“å­—æ®µ | ç±»å‹ | çŠ¶æ€ |
|---------|---------|-----------|------|------|
| `offering_id` | `edu_course_offering` | `offering_id` | INT | âœ… å®Œå…¨åŒ¹é… |
| `course_id` | `edu_course_offering` | `course_id` | INT NOT NULL | âœ… å®Œå…¨åŒ¹é… |
| `teacher_id` | `edu_course_offering` | `teacher_id` | INT | âœ… å®Œå…¨åŒ¹é… |
| `week_day` | `edu_course_offering` | `week_day` | TINYINT | âœ… å®Œå…¨åŒ¹é… |
| `start_period` | `edu_course_offering` | `start_period` | TINYINT | âœ… å®Œå…¨åŒ¹é… |
| `end_period` | `edu_course_offering` | `end_period` | TINYINT | âœ… å®Œå…¨åŒ¹é… |
| `classroom_id` | `edu_course_offering` | `classroom_id` | INT | âœ… å®Œå…¨åŒ¹é… |
| `course_name` | `edu_course` | `course_name` | VARCHAR(100) | âœ… å†—ä½™å­—æ®µï¼ˆåˆç†ï¼‰|
| `teacher_name` | `sys_user` | `real_name` | VARCHAR(30) | âœ… å†—ä½™å­—æ®µï¼ˆåˆç†ï¼‰|
| `classroom_name` | `edu_classroom` | `classroom_name` | VARCHAR(50) | âœ… å†—ä½™å­—æ®µï¼ˆåˆç†ï¼‰|

**ç»“è®º**: âœ… **å‰ç«¯æ‰€æœ‰å­—æ®µéƒ½èƒ½åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°å¯¹åº”ï¼å®Œå…¨åŒ¹é…ï¼**

---

## ğŸ”— å››ã€è¡¨å…³ç³»åˆ†æ

### 4.1 å®Œæ•´çš„æ•°æ®å…³ç³»é“¾

```
edu_course_offering (è¯¾ç¨‹å¼€è®¾è¡¨ - admin-end.sql)
    â”‚
    â”œâ”€â”€â†’ course_id â”€â”€â†’ edu_course (è¯¾ç¨‹ä¿¡æ¯)
    â”œâ”€â”€â†’ teacher_id â”€â”€â†’ edu_teacher â”€â”€â†’ sys_user (æ•™å¸ˆä¿¡æ¯)
    â”œâ”€â”€â†’ classroom_id â”€â”€â†’ edu_classroom (æ•™å®¤ä¿¡æ¯)
    â”œâ”€â”€â†’ semester_id â”€â”€â†’ edu_semester (å­¦æœŸä¿¡æ¯)
    â”‚
    â””â”€â”€â†’ offering_id è¢«ä»¥ä¸‹è¡¨å¼•ç”¨ï¼š
            â”œâ”€â”€â†’ edu_student_course (å­¦ç”Ÿé€‰è¯¾)
            â”œâ”€â”€â†’ edu_teaching_schedule (æ•™å­¦å®‰æ’)
            â”œâ”€â”€â†’ edu_class_course (ç­çº§è¯¾ç¨‹)
            â””â”€â”€â†’ prep_test_paper (è¯•å·)
```

### 4.2 è·¨æ–‡ä»¶å¼•ç”¨å…³ç³»

```
admin-end.sql
    â†“ å®šä¹‰
edu_course_offering (offering_id)
    â†“ å¼•ç”¨
teacher-student-end.sql
    â”œâ”€â”€ edu_student_course.offering_id
    â”œâ”€â”€ edu_teaching_schedule.offering_id
    â”œâ”€â”€ edu_class_course.offering_id
    â””â”€â”€ prep_test_paper.offering_id
```

**è®¾è®¡åˆç†æ€§**: âœ… è¿™æ˜¯**æ­£å¸¸çš„è·¨SQLæ–‡ä»¶å¼•ç”¨**ï¼Œç¬¦åˆæ¨¡å—åŒ–è®¾è®¡åŸåˆ™

---

## ğŸ“Š äº”ã€æ•°æ®åº“è®¾è®¡è¯„ä¼°

### 5.1 è®¾è®¡ä¼˜ç‚¹ âœ…

1. **æ¨¡å—åŒ–æ¸…æ™°**
   - ç®¡ç†åŠŸèƒ½ï¼ˆæ’è¯¾ï¼‰åœ¨ admin-end.sql
   - ä½¿ç”¨åŠŸèƒ½ï¼ˆé€‰è¯¾ã€ä¸Šè¯¾ï¼‰åœ¨ teacher-student-end.sql
   - èŒè´£åˆ†ç¦»æ˜ç¡®

2. **è¡¨å…³ç³»å®Œæ•´**
   - æ‰€æœ‰å¤–é”®éƒ½æœ‰å¯¹åº”çš„ä¸»è¡¨
   - æ•°æ®å®Œæ•´æ€§å¯ä»¥ä¿è¯

3. **å­—æ®µè®¾è®¡åˆç†**
   - åŒ…å«äº†è¯¾è¡¨æ‰€éœ€çš„æ‰€æœ‰å…³é”®ä¿¡æ¯
   - å­—æ®µå‘½åè§„èŒƒç»Ÿä¸€

### 5.2 æ½œåœ¨é—®é¢˜ âš ï¸

#### é—®é¢˜1ï¼šéƒ¨ç½²é¡ºåºä¾èµ–
```sql
-- å¿…é¡»å…ˆæ‰§è¡Œ admin-end.sql
CREATE TABLE edu_course_offering ...

-- ç„¶åæ‰èƒ½æ‰§è¡Œ teacher-student-end.sql
CREATE TABLE edu_student_course (
    offering_id INT NOT NULL,  -- ä¾èµ–ä¸Šé¢çš„è¡¨
    FOREIGN KEY (offering_id) REFERENCES edu_course_offering(offering_id)
);
```

**å»ºè®®**: åœ¨éƒ¨ç½²æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜æ‰§è¡Œé¡ºåº

#### é—®é¢˜2ï¼šæƒé™ç®¡ç†
ä¸åŒSQLæ–‡ä»¶å¯èƒ½éœ€è¦ä¸åŒçš„æ•°æ®åº“ç”¨æˆ·ï¼š
- ç®¡ç†å‘˜ç”¨æˆ·ï¼šå®Œæ•´è®¿é—® `edu_course_offering`
- å­¦ç”Ÿç”¨æˆ·ï¼šåªè¯»è®¿é—® `edu_course_offering`
- æ•™å¸ˆç”¨æˆ·ï¼šåªè¯»è®¿é—® `edu_course_offering`

---

## âœ… å…­ã€æœ€ç»ˆç»“è®º

### 6.1 é—®é¢˜çº æ­£

| é¡¹ç›® | ä¹‹å‰åˆ¤æ–­ | å®é™…æƒ…å†µ |
|-----|---------|---------|
| è¡¨æ˜¯å¦å­˜åœ¨ | âŒ ä¸å­˜åœ¨ | âœ… å­˜åœ¨äº admin-end.sql |
| æ•°æ®åº“è®¾è®¡ | âŒ æœ‰é—®é¢˜ | âœ… è®¾è®¡åˆç†ï¼Œæ¨¡å—åŒ– |
| å­—æ®µåŒ¹é… | âš ï¸ ä¸ç¡®å®š | âœ… å®Œå…¨åŒ¹é… |
| å‰ç«¯ä»£ç  | âš ï¸ ä¾èµ–ä¸å­˜åœ¨çš„è¡¨ | âœ… å®Œå…¨æ­£ç¡® |

### 6.2 å½“å‰çŠ¶æ€æ€»ç»“

#### âœ… **æ•°æ®åº“è®¾è®¡** 
- è¡¨ç»“æ„å®Œæ•´
- å…³ç³»è®¾è®¡åˆç†
- æ¨¡å—åˆ’åˆ†æ¸…æ™°

#### âœ… **å‰ç«¯ä»£ç **
- å­—æ®µå‘½åæ­£ç¡®
- æ•°æ®ç»“æ„åŒ¹é…
- æ— éœ€ä¿®æ”¹

#### âœ… **æ•´ä½“è¯„ä¼°**
**æ²¡æœ‰é—®é¢˜ï¼è¿™æ˜¯ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„æ•°æ®åº“ç»“æ„ï¼**

---

## ğŸ“ ä¸ƒã€éƒ¨ç½²å»ºè®®

### 7.1 æ•°æ®åº“åˆå§‹åŒ–é¡ºåº

```bash
# 1. å…ˆæ‰§è¡Œç®¡ç†ç«¯SQLï¼ˆåŒ…å«åŸºç¡€è¡¨å’Œæ’è¯¾è¡¨ï¼‰
mysql -u root -p database_name < admin-end.sql

# 2. å†æ‰§è¡Œæ•™å¸ˆ/å­¦ç”Ÿç«¯SQLï¼ˆä¾èµ–æ’è¯¾è¡¨ï¼‰
mysql -u root -p database_name < teacher-student-end.sql
```

### 7.2 å¤–é”®çº¦æŸå»ºè®®

æ‰§è¡Œå®Œä¸¤ä¸ªSQLæ–‡ä»¶åï¼Œå¯ä»¥æ·»åŠ å¤–é”®çº¦æŸï¼š

```sql
-- å­¦ç”Ÿé€‰è¯¾è¡¨çš„å¤–é”®
ALTER TABLE `edu_student_course` 
ADD CONSTRAINT `fk_student_course_offering` 
FOREIGN KEY (`offering_id`) 
REFERENCES `edu_course_offering`(`offering_id`);

-- æ•™å­¦å®‰æ’è¡¨çš„å¤–é”®
ALTER TABLE `edu_teaching_schedule` 
ADD CONSTRAINT `fk_teaching_schedule_offering` 
FOREIGN KEY (`offering_id`) 
REFERENCES `edu_course_offering`(`offering_id`);

-- ç­çº§è¯¾ç¨‹è¡¨çš„å¤–é”®
ALTER TABLE `edu_class_course` 
ADD CONSTRAINT `fk_class_course_offering` 
FOREIGN KEY (`offering_id`) 
REFERENCES `edu_course_offering`(`offering_id`);

-- è¯•å·è¡¨çš„å¤–é”®
ALTER TABLE `prep_test_paper` 
ADD CONSTRAINT `fk_test_paper_offering` 
FOREIGN KEY (`offering_id`) 
REFERENCES `edu_course_offering`(`offering_id`);
```

---

## ğŸ‰ å…«ã€æ€»ç»“

### æ„Ÿè°¢æ‚¨çš„çº æ­£ï¼

âœ… **æ•°æ®åº“è®¾è®¡å®Œå…¨æ­£å¸¸** - è¡¨ç¡®å®å­˜åœ¨ï¼Œåªæ˜¯åœ¨ä¸åŒçš„SQLæ–‡ä»¶ä¸­  
âœ… **å‰ç«¯ä»£ç å®Œå…¨æ­£ç¡®** - æ‰€æœ‰å­—æ®µéƒ½ä¸æ•°æ®åº“åŒ¹é…  
âœ… **ç³»ç»Ÿè®¾è®¡åˆç†** - æ¨¡å—åŒ–åˆ†ç¦»ï¼ŒèŒè´£æ¸…æ™°  

### å­¦åˆ°çš„ç»éªŒ

1. ğŸ“ æ£€æŸ¥é—®é¢˜æ—¶è¦**æ‰«ææ‰€æœ‰SQLæ–‡ä»¶**ï¼Œä¸èƒ½åªçœ‹ä¸€ä¸ª
2. ğŸ” è·¨æ–‡ä»¶å¼•ç”¨æ˜¯**æ­£å¸¸çš„è®¾è®¡æ¨¡å¼**
3. âœ… æ¨¡å—åŒ–SQLæ–‡ä»¶æ˜¯**è‰¯å¥½çš„å®è·µ**

---

**æŠ¥å‘Šæ›´æ–°æ—¶é—´**: 2025-10-14  
**çŠ¶æ€**: âœ… æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œæ— é—®é¢˜ï¼

