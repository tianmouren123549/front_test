<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è¯¾ç¨‹/è¯¾è¡¨</title>
  <style>
    :root {
      --bg: #f7f8fb;
      --sidebar: #2f3a56;
      --sidebar-active: #3f4b6e;
      --text: #1f2544;
      --muted: #6b7280;
      --primary: #5b7cff;
      --primary-600: #4a67d6;
      --card: #ffffff;
      --border: #e5e7eb;
      --notice-bg: #fff7e6;
      --notice-text: #8a5700;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
    }

    /* é¡¶éƒ¨é€šçŸ¥æ  */
    .notice-bar {
      width: 100%;
      background: var(--notice-bg);
      color: var(--notice-text);
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      border-bottom: 1px solid #fde8c3;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .notice-bar button {
      background: transparent;
      border: none;
      color: var(--notice-text);
      cursor: pointer;
      padding: 6px 8px;
      border-radius: 6px;
    }
    .notice-bar button:hover { background: rgba(0,0,0,0.05); }

    .app {
      display: grid;
      grid-template-columns: 257px 1fr;
      height: calc(100% - 0px);
    }

    /* ä¾§è¾¹æ  */
    .sidebar {
      background: #ffffff;
      color: var(--text);
      padding: 20px 16px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: calc(100vh - 0px);
      border-right: 1px solid var(--border);
    }
    .brand { font-weight: 700; letter-spacing: 0.5px; color: #64748b; }
    .profile {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 8px;
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 12px;
    }
    .profile img {
      width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.25);
    }
    .menu { display: flex; flex-direction: column; gap: 6px; margin-top: 8px; }
    .menu a {
      color: #334155;
      text-decoration: none;
      padding: 10px 12px;
      border-radius: 8px;
      display: block;
    }
    .menu a.active, .menu a:hover { background: #f1f5f9; }

    /* é¡¶éƒ¨æ  */
    .topbar {
      background: #ffffff;
      padding: 14px 24px;
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 40px;
      z-index: 999;
    }
    .search { display: flex; gap: 12px; align-items: center; justify-content: center; }
    .search input {
      width: 560px;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: #fff;
    }
    .announce-inline { color: #a16207; font-size: 12px; background:#fffbeb; border:1px solid #fde68a; padding:6px 10px; border-radius: 999px; }

    /* å†…å®¹åŒºåŸŸ */
    .content { padding: 20px 24px; }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(34, 41, 69, 0.04);
    }

    /* åˆå¹¶ï¼šè¯¾ç¨‹/è¯¾è¡¨ */
    .schedule-header { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 12px; padding: 12px 16px; border-bottom: 1px solid var(--border); }
    .controls { display: flex; align-items: center; gap: 10px; color: var(--muted); }
    .controls select, .controls button {
      padding: 8px 10px; border: 1px solid var(--border); border-radius: 8px; background: #fff; cursor: pointer;
    }
    .controls select:not(:last-child) {
      margin-right: 8px;
    }
    .controls .primary { background: var(--primary); color: #fff; border-color: var(--primary); }
    .controls .primary:hover { background: var(--primary-600); }
    .segmented { display: inline-flex; border:1px solid var(--border); border-radius: 10px; overflow:hidden; }
    .segmented button { border:0; background:#fff; padding:8px 14px; cursor:pointer; }
    .segmented button.active { background: var(--primary); color:#fff; }

    /* å‘¨æ•°é€‰æ‹©å™¨ */
    .week-picker { display:flex; flex-direction:column; align-items:center; gap:12px; padding:8px 0; }
    .week-row { display:flex; align-items:center; gap:18px; }
    .wp-arrow { width:36px; height:36px; border-radius:10px; border:1px solid var(--border); background:#fff; cursor:pointer; display:grid; place-items:center; color:#334155; }
    .wp-list { display:flex; align-items:center; gap:24px; }
    .wp-num { width:36px; height:36px; border-radius:999px; display:grid; place-items:center; color:#334155; cursor:pointer; }
    .wp-num.active { background: var(--primary); color:#fff; box-shadow:0 6px 16px rgba(91,124,255,.35); }
    .wp-btn { background: var(--primary); color:#fff; border:0; border-radius:10px; padding:8px 12px; cursor:pointer; display:flex; align-items:center; gap:8px; }
    .wp-btn-sm { padding:6px 10px; font-size:12px; border-radius:8px; }
    /* æå‡é€‰æ‹©å™¨ä¼˜å…ˆçº§ï¼Œè¦†ç›– .controls button çš„é€šç”¨æ ·å¼ */
    .week-picker .wp-btn, .week-picker .wp-btn-sm { background: var(--primary); color:#fff; border:0; }
    .wp-chip { border:1px solid var(--border); background:#fff; color:#334155; border-radius:999px; padding:6px 10px; cursor:pointer; }
    /* å°å¼¹çª—ï¼ˆæ˜¾ç¤ºå…¨éƒ¨å‘¨æ•°ï¼‰ */
    .wp-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; z-index:1000 }
    .wp-modal{ background:#fff; border:1px solid var(--border); border-radius:12px; width:520px; max-width:92vw; padding:14px; box-shadow:0 16px 40px rgba(0,0,0,.2) }
    .wp-modal-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px }
    .wp-modal-grid{ display:flex; gap:8px; flex-wrap:wrap; }
    .wp-foot { color:#334155; }

    .schedule-wrap { padding: 12px; }
    .schedule-grid {
      display: grid;
      grid-template-columns: 80px repeat(7, 1fr);
      grid-template-rows: auto repeat(5, 1fr);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
    }
    .grid-header { background: #f3f4f6; border-bottom: 1px solid var(--border); display: contents; }
    .grid-header div { padding: 18px; font-weight: 600; text-align: center; color:#475569; font-size: 13px; }

    .time-slot { 
      padding: 16px 10px; 
      border-bottom: 1px solid var(--border); 
      font-size: 12px; 
      color: var(--muted); 
      text-align: right; 
      min-height: 100px; 
      display: flex; 
      flex-direction: column; 
      align-items: flex-end; 
      justify-content: center;
      line-height: 1.2;
      flex: 1;
    }
    .cell { 
      border-right: 1px solid var(--border); 
      border-bottom: 1px solid var(--border); 
      min-height: 100px; 
      display: flex; 
      align-items: center; 
      justify-content: center;
      padding: 16px 10px;
    }
    
    /* è·¨è¡Œè¯¾ç¨‹æ ·å¼ */
    .course-span-3 { grid-row: span 3; }
    .course-span-2 { grid-row: span 2; }
    
    /* è°ƒæ•´æ—¶é—´åˆ—çš„ç½‘æ ¼ä½ç½® */
    .time-col { 
      grid-column: 1; 
      grid-row: 2 / -1; 
      display: flex; 
      flex-direction: column; 
      background: #fafafa; 
      border-right: 1px solid var(--border); 
    }
    
    /* ç§»é™¤åŸæ¥çš„æ—¶é—´åˆ—æ ·å¼å†²çª */
    .schedule-grid .time-col { background: #fafafa; border-right: 1px solid var(--border); }
    .cell:last-child { border-right: none; }
    /* è¯¾ç¨‹çŠ¶æ€è‰² */
    .course-upcoming{ 
      background: linear-gradient(135deg, #fef7f7, #fee2e2); 
      border: 1px solid #fca5a5;
      transition: all 0.2s ease;
    }
    .course-done{ 
      background: linear-gradient(135deg, #ecfdf5, #dcfce7); 
      border: 1px solid #a7f3d0;
      transition: all 0.2s ease;
    }
    .course-not-started{ 
      background: linear-gradient(135deg, #f9fafb, #f3f4f6); 
      border: 1px solid #d1d5db;
      transition: all 0.2s ease;
    }
    
    /* è¯¾ç¨‹å†…å®¹æ ·å¼ */
    .course-content {
      position: relative;
      width: 100%;
      height: 100%;
      padding: 10px 8px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    
    .course-name {
      font-size: 13px;
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 4px;
      color: #374151;
    }
    
    .teacher-name {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.2;
    }
    
    .status-icon {
      position: absolute;
      top: 4px;
      right: 4px;
      font-size: 10px;
      opacity: 0.9;
    }
    
    /* æ‚¬åœæ•ˆæœ */
    .cell:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }
    
    .course-not-started:hover {
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
    }
    
    .course-done:hover {
      background: linear-gradient(135deg, #dcfce7, #bbf7d0);
    }
    
    .course-upcoming:hover {
      background: linear-gradient(135deg, #fee2e2, #fecaca);
    }

    /* å“åº”å¼ä¼˜åŒ– */
    @media (max-width: 768px) {
      .course-name {
        font-size: 10px;
      }
      
      .teacher-name {
        font-size: 8px;
      }
      
      .status-icon {
        font-size: 7px;
      }
      
      .course-content {
        padding: 4px;
      }
      
      .grid-header {
        font-size: 11px;
      }
      
      .time-slot {
        font-size: 11px;
        padding: 8px 4px;
      }
    }
    
    /* è¯¾è¡¨ç½‘æ ¼å¢å¼º */
    .schedule-grid {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      background: white;
    }
    
    .grid-header div {
      font-weight: 600;
      background: linear-gradient(135deg, #f8fafc, #e2e8f0);
      border-bottom: 2px solid #e2e8f0;
    }
    
    .time-col .time-slot {
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
      font-weight: 600;
      color: #475569;
    }

    /* è¯¾ç¨‹åˆ—è¡¨ï¼ˆçŸ©å½¢å ä½å¸ƒå±€ï¼‰ */
    .course-list { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 20px; padding: 16px; }
    .course-item { border: 1px solid var(--border); border-radius: 12px; padding: 18px; background: #fff; display: flex; flex-direction: column; gap: 12px; }
    .course-item h4 { margin: 0; font-size: 16px; }
    .course-item .meta { color: var(--muted); font-size: 13px; }
    .course-rect { height: 120px; border: 1px dashed var(--border); border-radius: 10px; background: #fafafa; }

    /* ä»»åŠ¡ä¸æ”¶ä»¶ç®±åˆ—è¡¨æ ·å¼ */
    .list { display: flex; flex-direction: column; gap: 10px; padding: 16px; }
    .item { background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 12px; display: flex; justify-content: space-between; align-items: center; }
    .status { padding: 4px 8px; border-radius: 999px; font-size: 12px; }
    .status-blue { background: #e0e7ff; color: #3730a3; }
    .status-gray { background: #e5e7eb; color: #374151; }

    /* ç”¨æˆ·ä¸‹æ‹‰èœå•æ ·å¼ */
    .user-dropdown {
      position: relative;
      display: inline-block;
    }
    
    .user-profile-trigger {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 8px;
      transition: all 0.2s ease;
    }
    
    .user-profile-trigger:hover {
      background: rgba(0,0,0,0.05);
    }
    
    .dropdown-menu {
      position: absolute;
      top: 100%;
      right: -5px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      width: 110px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 1000;
      margin-top: 5px;
    }
    
    .user-dropdown:hover .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    
    .dropdown-menu a {
      display: block;
      padding: 12px 16px;
      color: var(--text);
      text-decoration: none;
      border-bottom: 1px solid #f1f5f9;
      transition: background 0.2s;
      text-align: center;
      font-size: 14px;
    }
    
    .dropdown-menu a:last-child {
      border-bottom: none;
    }
    
    .dropdown-menu a:hover {
      background: #f8fafc;
    }

    /* æ¨èåŠ¨ç”»æ•ˆæœ */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* ä»Šæ—¥äº‹é¡¹æ ·å¼ */
    .today-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .today-content {
      display: grid;
      grid-template-columns: 3fr 2fr;
      gap: 24px;
      padding: 20px;
    }
    
    .section-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 16px;
      justify-content: space-between;
    }
    
    .section-header span:first-child {
      font-size: 16px;
    }
    
    .course-timeline {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .course-item {
      display: flex;
      gap: 16px;
      padding: 16px;
      border-radius: 10px;
      border-left: 4px solid var(--border);
      background: #fafafa;
      transition: all 0.2s ease;
    }
    
    .course-item.completed {
      border-left-color: #22c55e;
      background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    }
    
    .course-item.current {
      border-left-color: #f59e0b;
      background: linear-gradient(135deg, #fffbeb, #fef3c7);
      box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
    }
    
    .course-item.upcoming {
      border-left-color: #3b82f6;
      background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    }
    
    .course-time {
      min-width: 100px;
      font-weight: 600;
      color: var(--text);
      font-size: 14px;
    }
    
    .course-info {
      flex: 1;
    }
    
    .course-title {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }
    
    .course-name {
      font-weight: 600;
      color: var(--text);
      font-size: 15px;
    }
    
    .course-status {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
    }
    
    .course-status.done {
      background: #22c55e;
      color: white;
    }
    
    .course-status.ongoing {
      background: #f59e0b;
      color: white;
    }
    
    .course-status.coming {
      background: #3b82f6;
      color: white;
    }
    
    .course-details {
      display: flex;
      gap: 12px;
      color: var(--muted);
      font-size: 12px;
    }
    
    .todo-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .todo-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      border-radius: 8px;
      background: #fff;
      border: 1px solid var(--border);
      transition: all 0.2s ease;
    }
    
    .todo-item:hover {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .todo-item.urgent {
      border-left: 4px solid #ef4444;
      background: linear-gradient(135deg, #fef2f2, #fee2e2);
    }
    
    .todo-item.normal {
      border-left: 4px solid #3b82f6;
    }
    
    .todo-item.completed {
      background: #f9fafb;
      opacity: 0.7;
    }
    
    .todo-item.completed label {
      text-decoration: line-through;
      color: var(--muted);
    }
    
    .todo-item input[type="checkbox"] {
      margin: 0;
      cursor: pointer;
    }
    
    .todo-item label {
      flex: 1;
      cursor: pointer;
      font-size: 14px;
      color: var(--text);
    }
    
    .todo-deadline {
      font-size: 11px;
      color: var(--muted);
      white-space: nowrap;
    }
    
    .todo-item.urgent .todo-deadline {
      color: #ef4444;
      font-weight: 600;
    }

    /* å“åº”å¼ */
    @media (max-width: 1200px) {
      .today-content {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }
    
    @media (max-width: 1100px) {
      .course-list { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 860px) {
      .app { grid-template-columns: 1fr; }
      .sidebar { position: sticky; top: 0; z-index: 998; border-bottom: 1px solid rgba(255,255,255,0.1); }
      .course-list { grid-template-columns: 1fr; }
      .search input { width: 180px; }
      .today-content { padding: 16px; gap: 16px; }
      .course-item { padding: 12px; }
      .todo-item { padding: 10px; }
      /* å¿«é€Ÿå­¦ä¹ ç§»åŠ¨ç«¯é€‚é… */
      .quick-learning-buttons { 
        flex-direction: column; 
        gap: 12px !important; 
      }
      .quick-learning-button {
        width: 100% !important;
        justify-content: center !important;
      }
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨é€šçŸ¥æ  -->
  <div class="notice-bar" id="noticeBar">
    <span>é€šçŸ¥ï¼šæœ¬å‘¨èµ·ä¸Šè¯¾æ—¶é—´è°ƒæ•´ä¸º 8:30 å¼€å§‹ï¼Œè¯·æå‰åˆ°æ•™å®¤ã€‚</span>
    <button aria-label="å…³é—­é€šçŸ¥" onclick="document.getElementById('noticeBar').style.display='none'">å…³é—­</button>
  </div>

  <div class="app">
    <aside class="sidebar">
      <div class="brand">è´µå·å¤§å­¦ï¼ˆå­¦ç”Ÿï¼‰</div>
      <div class="profile" onclick="goToProfile()" style="cursor: pointer;">
        <img src="https://picsum.photos/seed/user123/80" alt="avatar" />
        <div>
          <div>123</div>
          <div style="opacity:.7;font-size:12px">pingu</div>
        </div>
      </div>
      <nav class="menu">
        <a class="active" href="#" id="linkSchedule">è¯¾ç¨‹/è¯¾è¡¨</a>
        <a href="#" id="linkToday">ä»Šæ—¥äº‹é¡¹</a>
        <a href="#" id="linkTasks">æˆ‘çš„ä»»åŠ¡</a>
        <a href="#" id="linkInbox">æ”¶ä»¶ç®±</a>
        <a href="#" id="linkPath">å­¦ä¹ è·¯å¾„è§„åˆ’</a>
      </nav>
    </aside>

    <main>
      <!-- é¡¶æ ï¼ˆæœç´¢ã€ç”¨æˆ·ï¼‰ -->
      <div class="topbar">
        <div class="search">
          <input placeholder="è¾“å…¥å…³é”®è¯" />
          <span class="announce-inline">å…¬å‘Šæ ï¼šå»¶åè¿”æ ¡ç¬¬2å‘¨</span>
        </div>
        <div class="user-dropdown">
          <div class="user-profile-trigger">
            <span style="color:var(--muted);">123</span>
            <img src="https://picsum.photos/seed/user123/32" style="width:32px;height:32px;border-radius:50%" alt="avatar" />
          </div>
          <div class="dropdown-menu">
            <a href="#" onclick="goToProfile()">
              <span>ä¸ªäººä¸­å¿ƒ</span>
            </a>
            <a href="#" onclick="logout()">
              <span>é€€å‡ºç™»å½•</span>
            </a>
          </div>
        </div>
      </div>

      <div class="content">
        <section class="card" id="scheduleCard">
          <div class="schedule-header">
            <div class="controls">
              <select id="semesterFilter">
                <option>2025-2026 ä¸Šå­¦æœŸ</option>
                <option>2025-2026 ä¸‹å­¦æœŸ</option>
                <option>2024-2025 ä¸Šå­¦æœŸ</option>
              </select>
              <select id="statusFilter" onchange="filterByStatus()">
                <option value="all">æ‰€æœ‰çŠ¶æ€</option>
                <option value="course-done">å·²å®Œæˆ</option>
                <option value="course-upcoming">å³å°†å¼€å§‹</option>
                <option value="course-not-started">æœªå¼€æ’­</option>
              </select>
            </div>
            <div class="controls" style="justify-content:center;">
              <div class="week-picker" id="weekPicker">
               
                <div class="week-row">
                  <button class="wp-arrow" id="wpPrev" aria-label="ä¸Šä¸€å‘¨">â—€</button>
                  <div class="wp-list" id="wpList"></div>
                  <button class="wp-arrow" id="wpNext" aria-label="ä¸‹ä¸€å‘¨">â–¶</button>
                  <button class="wp-btn wp-btn-sm" id="wpToggle" title="æ˜¾ç¤ºå…¨éƒ¨å‘¨æ•°"><span>â–¤</span><span>å…¨éƒ¨å‘¨æ•°</span></button>
                </div>
                <!-- å°å¼¹çª—ï¼šå…¨éƒ¨å‘¨æ•° -->
                <div class="wp-overlay" id="wpOverlay" role="dialog" aria-modal="true">
                  <div class="wp-modal">
                    <div class="wp-modal-head"><strong>é€‰æ‹©å‘¨æ•°</strong><button class="btn" id="wpClose" style="border:1px solid var(--border);background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer">å…³é—­</button></div>
                    <div class="wp-modal-grid" id="wpAll"></div>
                  </div>
                </div>
                <div class="wp-foot">å½“å‰é€‰æ‹©ï¼š<span id="wpCurrent" style="color:var(--primary);font-weight:600">ç¬¬2å‘¨</span></div>
              </div>
            </div>
            <div class="controls" style="justify-content:flex-end;display:flex;gap:12px;align-items:center;">
              <button onclick="location.href='course_selection.html'" style="background:var(--primary);color:#fff;border:0;border-radius:10px;padding:8px 16px;cursor:pointer;display:flex;align-items:center;gap:6px;font-size:14px;transition:all 0.2s ease;">
                <span>ç½‘ä¸Šé€‰è¯¾</span>
              </button>
              <div class="segmented">
                <button id="tabSchedule" class="active">è¯¾è¡¨</button>
                <button id="tabCourses">è¯¾ç¨‹</button>
              </div>
            </div>
          </div>

          <!-- è¯¾è¡¨è§†å›¾ -->
          <div class="schedule-wrap" id="scheduleView">
            <div style="display:flex;justify-content:flex-end;gap:16px;margin-bottom:8px;font-size:12px;color:var(--muted)">
              <span><span style="color:#6b7280">â¸</span> æœªå¼€æ’­</span>
              <span><span style="color:#16a34a">âœ“</span> å·²å®Œæˆ</span>
              <span><span style="color:#dc2626">ğŸ”´</span> å³å°†å¼€å§‹</span>
            </div>
            <div class="schedule-grid">
              <div class="grid-header">
                <div style="background: linear-gradient(135deg, #f1f5f9, #e2e8f0); color: #64748b;">æ—¶é—´</div>
                <div>å‘¨ä¸€<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-02</span></div>
                <div>å‘¨äºŒ<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-03</span></div>
                <div>å‘¨ä¸‰<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-04</span></div>
                <div>å‘¨å››<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-05</span></div>
                <div>å‘¨äº”<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-06</span></div>
                <div>å‘¨å…­<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-07</span></div>
                <div>å‘¨æ—¥<br/><span style="color:var(--muted);font-weight:400;font-size:11px">02-08</span></div>
              </div>
              
              <!-- æ—¶é—´åˆ— -->
              <div class="time-col">
                <div class="time-slot">1<br/>08:00-10:00</div>
                <div class="time-slot">2<br/>10:00-12:00</div>
                <div class="time-slot">3<br/>14:30-16:30</div>
                <div class="time-slot">4<br/>16:30-18:30</div>
                <div class="time-slot">5<br/>19:30-21:30</div>
              </div>
              
              <!-- å‘¨ä¸€ -->
              <a class="cell course-not-started" style="grid-column: 2; grid-row: 2;" href="liveroom_off.html?course=è®¡ç®—æœºç½‘ç»œ&mode=live&from=schedule&status=not-started" title="è®¡ç®—æœºç½‘ç»œ - å­”è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">è®¡ç®—æœºç½‘ç»œ</span><br/><span class="teacher-name">å­”è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              <a class="cell course-not-started" style="grid-column: 2; grid-row: 4;" href="liveroom_off.html?course=è½¯ä»¶å·¥ç¨‹&mode=live&from=schedule&status=not-started" title="è½¯ä»¶å·¥ç¨‹ - åˆ˜è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">è½¯ä»¶å·¥ç¨‹</span><br/><span class="teacher-name">åˆ˜è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              
              <!-- å‘¨äºŒ -->  
              <a class="cell course-upcoming" style="grid-column: 3; grid-row: 2;" href="liveroom.html?course=è½¯ä»¶å·¥ç¨‹&mode=live&from=schedule" title="è½¯ä»¶å·¥ç¨‹ - åˆ˜è€å¸ˆ (å³å°†å¼€å§‹)"><div class="course-content"><span class="course-name">è½¯ä»¶å·¥ç¨‹</span><br/><span class="teacher-name">åˆ˜è€å¸ˆ</span><span class="status-icon">ğŸ”´</span></div></a>
              <a class="cell course-upcoming" style="grid-column: 3; grid-row: 5;" href="liveroom.html?course=MVVMå‰ç«¯æ¡†æ¶å¼€å‘æŠ€æœ¯&mode=live&from=schedule" title="MVVMå‰ç«¯æ¡†æ¶å¼€å‘æŠ€æœ¯ - ç†Šè€å¸ˆ (å³å°†å¼€å§‹)"><div class="course-content"><span class="course-name">MVVMæ¡†æ¶</span><br/><span class="teacher-name">ç†Šè€å¸ˆ</span><span class="status-icon">ğŸ”´</span></div></a>
              
              <!-- å‘¨ä¸‰ -->
              <a class="cell course-done" style="grid-column: 4; grid-row: 2;" href="liveroom_off.html?course=Java Webé«˜çº§æŠ€æœ¯&mode=replay&from=schedule" title="Java Webé«˜çº§æŠ€æœ¯ - å„è€å¸ˆ (å·²å®Œæˆ)"><div class="course-content"><span class="course-name">Java Webé«˜çº§</span><br/><span class="teacher-name">å„è€å¸ˆ</span><span class="status-icon">âœ“</span></div></a>
              <a class="cell course-not-started" style="grid-column: 4; grid-row: 3;" href="liveroom_off.html?course=æ•°å­¦å»ºæ¨¡&mode=live&from=schedule&status=not-started" title="æ•°å­¦å»ºæ¨¡ - ä¸è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">æ•°å­¦å»ºæ¨¡</span><br/><span class="teacher-name">ä¸è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              <a class="cell course-not-started" style="grid-column: 4; grid-row: 5;" href="liveroom_off.html?course=è½¯ä»¶è®¾è®¡ä¸ç³»ç»Ÿæ„å‹&mode=live&from=schedule&status=not-started" title="è½¯ä»¶è®¾è®¡ä¸ç³»ç»Ÿæ„å‹ - åˆ˜è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">è½¯ä»¶è®¾è®¡</span><br/><span class="teacher-name">åˆ˜è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              
              <!-- å‘¨å›› -->
              <a class="cell course-done" style="grid-column: 5; grid-row: 2;" href="liveroom_off.html?course=Java Webåå°„æŠ€æœ¯&mode=replay&from=schedule" title="Java Webåå°„æŠ€æœ¯ - ç½—è€å¸ˆ (å·²å®Œæˆ)"><div class="course-content"><span class="course-name">Javaåå°„</span><br/><span class="teacher-name">ç½—è€å¸ˆ</span><span class="status-icon">âœ“</span></div></a>
              <a class="cell course-upcoming" style="grid-column: 5; grid-row: 5;" href="liveroom.html?course=Dockeräº‘å®¹å™¨ä¸ç®¡ç†æŠ€æœ¯&mode=live&from=schedule" title="Dockeräº‘å®¹å™¨ä¸ç®¡ç†æŠ€æœ¯ - ç½—è€å¸ˆ (å³å°†å¼€å§‹)"><div class="course-content"><span class="course-name">Dockerå®¹å™¨</span><br/><span class="teacher-name">ç½—è€å¸ˆ</span><span class="status-icon">ğŸ”´</span></div></a>
              
              <!-- å‘¨äº” -->
              <a class="cell course-not-started" style="grid-column: 6; grid-row: 2;" href="liveroom_off.html?course=è®¡ç®—æœºç½‘ç»œ&mode=live&from=schedule&status=not-started" title="è®¡ç®—æœºç½‘ç»œ - å­”è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">è®¡ç®—æœºç½‘ç»œ</span><br/><span class="teacher-name">å­”è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              
              <!-- å‘¨å…­ -->
              <a class="cell course-not-started" style="grid-column: 7; grid-row: 3;" href="liveroom_off.html?course=è½¯ä»¶è®¾è®¡ä¸ç³»ç»Ÿæ„å‹&mode=live&from=schedule&status=not-started" title="è½¯ä»¶è®¾è®¡ä¸ç³»ç»Ÿæ„å‹ - åˆ˜è€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">è½¯ä»¶è®¾è®¡</span><br/><span class="teacher-name">åˆ˜è€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              <a class="cell course-upcoming" style="grid-column: 7; grid-row: 6;" href="liveroom.html?course=é«˜çº§æ•°æ®åº“æŠ€æœ¯ä¸åº”ç”¨&mode=live&from=schedule" title="é«˜çº§æ•°æ®åº“æŠ€æœ¯ä¸åº”ç”¨ - é»„è€å¸ˆ (å³å°†å¼€å§‹)"><div class="course-content"><span class="course-name">æ•°æ®åº“åº”ç”¨</span><br/><span class="teacher-name">é»„è€å¸ˆ</span><span class="status-icon">ğŸ”´</span></div></a>
              
              <!-- å‘¨æ—¥ -->
              <a class="cell course-not-started" style="grid-column: 8; grid-row: 3;" href="liveroom_off.html?course=MVVMå‰ç«¯æ¡†æ¶å¼€å‘æŠ€æœ¯&mode=live&from=schedule&status=not-started" title="MVVMå‰ç«¯æ¡†æ¶å¼€å‘æŠ€æœ¯ - ç†Šè€å¸ˆ (æœªä¸Šè¯¾)"><div class="course-content"><span class="course-name">MVVMæ¡†æ¶</span><br/><span class="teacher-name">ç†Šè€å¸ˆ</span><span class="status-icon">â¸</span></div></a>
              <a class="cell course-upcoming" style="grid-column: 8; grid-row: 5;" href="liveroom.html?course=Dockeräº‘å®¹å™¨æŠ€æœ¯&mode=live&from=schedule" title="Dockeräº‘å®¹å™¨æŠ€æœ¯ - ç½—è€å¸ˆ (å³å°†å¼€å§‹)"><div class="course-content"><span class="course-name">Dockerå®¹å™¨</span><br/><span class="teacher-name">ç½—è€å¸ˆ</span><span class="status-icon">ğŸ”´</span></div></a>
            </div>
          </div>

          <!-- è¯¾ç¨‹åˆ—è¡¨è§†å›¾ï¼ˆçŸ©å½¢å ä½ï¼Œæ˜¾ç¤ºè¯¾ç¨‹ä¿¡æ¯ï¼‰ -->
          <div class="course-list" id="courseListView" style="display:none">
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰" style="text-decoration:none;color:inherit">é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ æ•°å­¦ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šç‹è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=å¤§å­¦ç‰©ç†" style="text-decoration:none;color:inherit">å¤§å­¦ç‰©ç†</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ ç‰©ç†äºŒç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šæè€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=è®¡ç®—æœºå¯¼è®º" style="text-decoration:none;color:inherit">è®¡ç®—æœºå¯¼è®º</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šèµµè€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4>çº¿æ€§ä»£æ•°</h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ æ•°å­¦ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šå­™è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4>è‹±è¯­ï¼ˆç»¼åˆï¼‰</h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ å¤–è¯­ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šé™ˆè€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=æ€æƒ³é“å¾·ä¸æ³•æ²»" style="text-decoration:none;color:inherit">æ€æƒ³é“å¾·ä¸æ³•æ²»</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ å…¬å…±è¯¾</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šå‘¨è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=ç¨‹åºè®¾è®¡åŸºç¡€" style="text-decoration:none;color:inherit">ç¨‹åºè®¾è®¡åŸºç¡€</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šåˆ˜è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=å¤§å­¦è‹±è¯­" style="text-decoration:none;color:inherit">å¤§å­¦è‹±è¯­</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ å¤–è¯­ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šå¼ è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=æ•°æ®ç»“æ„" style="text-decoration:none;color:inherit">æ•°æ®ç»“æ„</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šé’±è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=æ“ä½œç³»ç»Ÿ" style="text-decoration:none;color:inherit">æ“ä½œç³»ç»Ÿ</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šå´è€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡" style="text-decoration:none;color:inherit">æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ æ•°å­¦ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šéƒ‘è€å¸ˆ</div>
            </div>

            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=æ•°æ®åº“åŸç†" style="text-decoration:none;color:inherit">æ•°æ®åº“åŸç†</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šé™ˆè€å¸ˆ</div>
            </div>
            <div class="course-item">
              <div class="course-rect"></div>
              <h4><a href="course_detail.html?course=è½¯ä»¶å·¥ç¨‹" style="text-decoration:none;color:inherit">è½¯ä»¶å·¥ç¨‹</a></h4>
              <div class="meta">å¹´çº§/ç­çº§ï¼š2025çº§ è®¡ç§‘ä¸€ç­</div>
              <div class="meta">ä»»è¯¾è€å¸ˆï¼šéŸ©è€å¸ˆ</div>
            </div>
          </div>
          
          <!-- å­¦ä¹ è·¯å¾„è§„åˆ’è§†å›¾ï¼ˆä»ä¾§è¾¹æ è¿›å…¥ï¼Œç‹¬ç«‹äºè¯¾ç¨‹åˆ—è¡¨ï¼‰ -->
          <section id="pathView" style="display:none; padding: 16px;">
            <div style="display:grid;grid-template-columns:320px 1fr;gap:16px;">
              <!-- å·¦åˆ—ï¼šè¯¾ç¨‹ä¸è¿›åº¦/è–„å¼±ç‚¹æç¤º -->
              <div class="card" style="padding:12px">
                <div style="font-weight:600;margin-bottom:8px">æˆ‘çš„è¯¾ç¨‹ä¸è¿›åº¦</div>
                <div style="display:flex;flex-direction:column;gap:10px">
                  <div id="course-math" onclick="switchLearningPath('é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰')" style="border:2px solid var(--primary);border-radius:10px;padding:10px;cursor:pointer;transition:all 0.2s;background:linear-gradient(135deg, #f0f9ff, #e0f2fe)" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(91,124,255,0.15)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
                    <div style="display:flex;justify-content:space-between"><span style="font-weight:600">é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰</span><span style="color:#ef4444">è–„å¼±ï¼šæé™ã€å¯¼æ•°</span></div>
                    <div style="height:8px;background:#f1f5f9;border-radius:999px;margin-top:8px;overflow:hidden"><div style="width:48%;height:100%;background:#5b7cff"></div></div>
                    <div style="margin-top:4px;font-size:10px;color:var(--primary)">â— å½“å‰é€‰ä¸­</div>
                  </div>
                  <div id="course-physics" onclick="switchLearningPath('å¤§å­¦ç‰©ç†')" style="border:1px solid var(--border);border-radius:10px;padding:10px;cursor:pointer;transition:all 0.2s" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
                    <div style="display:flex;justify-content:space-between"><span>å¤§å­¦ç‰©ç†</span><span style="color:#16a34a">ä¼˜åŠ¿ï¼šåŠ›å­¦åŸºç¡€</span></div>
                    <div style="height:8px;background:#f1f5f9;border-radius:999px;margin-top:8px;overflow:hidden"><div style="width:72%;height:100%;background:#22c55e"></div></div>
                  </div>
                  <div id="course-computer" onclick="switchLearningPath('è®¡ç®—æœºå¯¼è®º')" style="border:1px solid var(--border);border-radius:10px;padding:10px;cursor:pointer;transition:all 0.2s" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'">
                    <div style="display:flex;justify-content:space-between"><span>è®¡ç®—æœºå¯¼è®º</span><span style="color:#ef4444">è–„å¼±ï¼šäºŒè¿›åˆ¶ã€é€»è¾‘é—¨</span></div>
                    <div style="height:8px;background:#f1f5f9;border-radius:999px;margin-top:8px;overflow:hidden"><div style="width:35%;height:100%;background:#fb7185"></div></div>
                  </div>
                </div>
              </div>

              <!-- å³åˆ—ï¼šå­¦ä¹ è·¯å¾„å›¾ï¼ˆèŠ‚ç‚¹å«å¼±é¡¹ï¼Œå‹¾å¼•è¿›ä¸€æ­¥å­¦ä¹ ï¼‰ -->
              <div class="card" style="padding:12px">
                <div style="display:flex;align-items:center;justify-content:space-between">
                  <div style="font-weight:600" id="pathTitle">å­¦ä¹ è·¯å¾„ Â· é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰</div>
                  <a id="enterClassroomBtn" href="liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=live&from=schedule&status=not-started" style="text-decoration:none;color:#fff;padding:8px 12px;border-radius:8px;background:var(--primary);font-size:12px">è¿›å…¥è¯¾å ‚</a>
                </div>

                <!-- æ¯æ—¥æ™ºèƒ½æ¨èåŒºåŸŸ -->
                <div id="dailyRecommendation" style="background:linear-gradient(135deg, #fef3c7, #fef7e6);border:1px solid #f59e0b;border-radius:8px;padding:12px;margin:12px 0;position:relative">
                  <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <span style="font-size:16px">ğŸ¯</span>
                    <div style="font-weight:600;color:#b45309">ä»Šæ—¥æ™ºèƒ½æ¨è</div>
                    <span style="background:#ef4444;color:#fff;border-radius:999px;padding:1px 6px;font-size:10px;font-weight:600">ç´§æ€¥</span>
                  </div>
                  <div id="recommendationText" style="color:#8a5700;font-size:13px;margin-bottom:10px">æ£€æµ‹åˆ°æé™å’Œå¯¼æ•°æŒæ¡è–„å¼±ï¼Œå»ºè®®ä¼˜å…ˆç»ƒä¹ ä»¥ä¸‹å†…å®¹</div>
                  <div id="recommendationButtons" style="display:flex;gap:8px;flex-wrap:wrap">
                    <button onclick="showRecommendedQuestions('æé™')" style="background:#ef4444;color:#fff;border:none;border-radius:16px;padding:4px 10px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px">
                      <span>ğŸ”¥</span>æé™ä¸“ç»ƒ (é”™é¢˜ç‡63%)
                    </button>
                    <button onclick="showRecommendedQuestions('å¯¼æ•°')" style="background:#f59e0b;color:#fff;border:none;border-radius:16px;padding:4px 10px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px">
                      <span>âš¡</span>å¯¼æ•°å¼ºåŒ– (é”™é¢˜ç‡51%)
                    </button>
                    <button onclick="showDailyMixedQuestions()" style="background:#8b5cf6;color:#fff;border:none;border-radius:16px;padding:4px 10px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px">
                      <span>ğŸ²</span>ç»¼åˆç»ƒä¹ 
                    </button>
                  </div>
                  <div style="position:absolute;top:8px;right:8px;animation:pulse 2s infinite">
                    <span style="color:#ef4444;font-size:12px">â—</span>
                  </div>
                </div>
                <div id="learningPathNodes" style="margin-top:12px;display:grid;grid-template-columns:repeat(4,1fr);gap:12px">
                  <div style="border:1px dashed var(--border);border-radius:10px;padding:12px;background:#fafafa;position:relative">
                    <div style="font-weight:600">æé™</div>
                    <div style="color:#ef4444;font-size:12px;margin-top:6px">é”™é¢˜ç‡ 63%</div>
                    <div style="margin-top:8px;display:flex;flex-direction:column;gap:4px">
                      <a href="liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=replay&from=schedule" style="font-size:12px">çœ‹å›æ”¾å·©å›º</a>
                      <button onclick="showRecommendedQuestions('æé™')" style="background:var(--primary);color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:11px;cursor:pointer">ğŸ“ ä¸“é¡¹ç»ƒä¹ </button>
                  </div>
                    <div style="position:absolute;top:8px;right:8px;background:#ef4444;color:#fff;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center">!</div>
                  </div>
                  <div style="border:1px dashed var(--border);border-radius:10px;padding:12px;background:#fafafa;position:relative">
                    <div style="font-weight:600">å¯¼æ•°</div>
                    <div style="color:#ef4444;font-size:12px;margin-top:6px">é”™é¢˜ç‡ 51%</div>
                    <div style="margin-top:8px;display:flex;flex-direction:column;gap:4px">
                      <a href="liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=live&from=schedule&status=not-started" style="font-size:12px;color:var(--primary);text-decoration:none">è¿›å…¥è¯¾å ‚ç­”ç–‘</a>
                      <button onclick="showRecommendedQuestions('å¯¼æ•°')" style="background:var(--primary);color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:11px;cursor:pointer">ğŸ“ ä¸“é¡¹ç»ƒä¹ </button>
                    </div>
                    <div style="position:absolute;top:8px;right:8px;background:#f59e0b;color:#fff;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center">!</div>
                  </div>
                  <div style="border:1px dashed var(--border);border-radius:10px;padding:12px;background:#fafafa">
                    <div style="font-weight:600">å¾®åˆ†åº”ç”¨</div>
                    <div style="color:#16a34a;font-size:12px;margin-top:6px">æŒæ¡è‰¯å¥½</div>
                    <div style="margin-top:8px;display:flex;flex-direction:column;gap:4px">
                      <a href="course_detail.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰" style="font-size:12px">åˆ·é¢˜ä¿æŒ</a>
                      <button onclick="showRecommendedQuestions('å¾®åˆ†åº”ç”¨')" style="background:#22c55e;color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:11px;cursor:pointer">ğŸ¯ å·©å›ºç»ƒä¹ </button>
                    </div>
                  </div>
                  <div style="border:1px dashed var(--border);border-radius:10px;padding:12px;background:#fafafa">
                    <div style="font-weight:600">ç§¯åˆ†</div>
                    <div style="color:#f59e0b;font-size:12px;margin-top:6px">ä¸€èˆ¬</div>
                    <div style="margin-top:8px;display:flex;flex-direction:column;gap:4px">
                      <a href="liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=live&from=schedule&status=not-started" style="font-size:12px;color:var(--primary);text-decoration:none">è®¾å®šå­¦ä¹ è®¡åˆ’</a>
                      <button onclick="showRecommendedQuestions('ç§¯åˆ†')" style="background:#f59e0b;color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:11px;cursor:pointer">ğŸ“š æå‡ç»ƒä¹ </button>
                    </div>
                  </div>
                </div>

                <!-- æ™ºèƒ½æ¨èé¢˜ç›®å¼¹çª— -->
                <div id="questionModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;z-index:1000;align-items:center;justify-content:center">
                  <div style="background:#fff;border-radius:12px;width:90%;max-width:800px;max-height:80vh;overflow:auto;box-shadow:0 20px 40px rgba(0,0,0,0.15)">
                    <div style="padding:20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between">
                      <div>
                        <div style="font-size:18px;font-weight:600;color:var(--text)">ğŸ¯ <span id="modalTitle">ä¸“é¡¹ç»ƒä¹ æ¨è</span></div>
                        <div style="font-size:13px;color:var(--muted);margin-top:4px">æ ¹æ®ä½ çš„å­¦ä¹ è·¯å¾„æ™ºèƒ½æ¨è</div>
                      </div>
                      <button onclick="closeQuestionModal()" style="background:none;border:none;font-size:20px;color:var(--muted);cursor:pointer;padding:4px">Ã—</button>
                    </div>
                    <div id="questionContent" style="padding:20px"></div>
                  </div>
                </div>

                <!-- å­¦ä¹ æ—¥ç¨‹ç”Ÿæˆæ¨¡å— -->
                <div class="card" style="padding:24px;margin-top:20px;min-height:280px">
                  <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
                    <div style="display:flex;align-items:center;gap:12px">
                      <span style="font-size:32px">ğŸ“…</span>
                      <div>
                        <div style="font-weight:600;color:var(--text);font-size:18px">æ™ºèƒ½æ—¥ç¨‹ç”Ÿæˆ</div>
                        <div style="font-size:13px;color:var(--muted);margin-top:2px">åŸºäºå­¦ä¹ è·¯å¾„è‡ªåŠ¨å®‰æ’</div>
                      </div>
                    </div>
                    <button id="finalSprintBtn" onclick="alert('è¿›å…¥æœŸæœ«å†²åˆºæ¨¡å¼')" style="background:#ef4444;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:12px;font-weight:600;cursor:pointer;display:none">
                      ğŸ”¥ æœŸæœ«å†²åˆº
                    </button>
                  </div>

                  <div id="scheduleContent" style="background:linear-gradient(135deg,#f0f9ff,#e0f2fe);border:1px solid #0ea5e9;border-radius:12px;padding:20px;margin-bottom:20px">
                    <div style="font-size:16px;color:#0369a1;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:8px">
                      <span>ğŸ“Š</span> æœ¬å‘¨ç”Ÿæˆè®¡åˆ’
                    </div>
                    <div style="font-size:14px;color:var(--text);line-height:1.8;padding-left:8px">
                      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                        <span style="width:6px;height:6px;background:#ef4444;border-radius:50%"></span>
                        <span><strong>æé™ä¸“é¡¹ç»ƒä¹ </strong>ï¼šå‘¨äºŒ 19:00-20:00</span>
                      </div>
                      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                        <span style="width:6px;height:6px;background:#f59e0b;border-radius:50%"></span>
                        <span><strong>å¯¼æ•°å¼ºåŒ–è®­ç»ƒ</strong>ï¼šå‘¨å›› 16:00-17:30</span>
                      </div>
                      <div style="display:flex;align-items:center;gap:8px">
                        <span style="width:6px;height:6px;background:#22c55e;border-radius:50%"></span>
                        <span><strong>å¾®åˆ†åº”ç”¨å¤ä¹ </strong>ï¼šå‘¨æ—¥ 14:00-15:00</span>
                      </div>
                    </div>
                  </div>

                  <div style="display:grid;grid-template-columns:1fr auto;gap:20px;align-items:flex-start">
                    <div>
                      <div style="font-size:14px;color:var(--muted);margin-bottom:8px">ä¸‹æ¬¡æ›´æ–°ï¼šå‘¨æ—¥è‡ªåŠ¨ç”Ÿæˆä¸‹å‘¨è®¡åˆ’</div>
                      <div style="display:flex;gap:8px;flex-wrap:wrap">
                        <span style="background:#fef3c7;color:#b45309;padding:3px 8px;border-radius:6px;font-size:11px;font-weight:500">æ™ºèƒ½æ’ç¨‹</span>
                        <span style="background:#f0fdf4;color:#16a34a;padding:3px 8px;border-radius:6px;font-size:11px;font-weight:500">å¯¼å‡ºICS</span>
                        <span style="background:#fce7f3;color:#be185d;padding:3px 8px;border-radius:6px;font-size:11px;font-weight:500">è´Ÿè½½å‡è¡¡</span>
                      </div>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:8px">
                      <button onclick="alert('ç”Ÿæˆæœ¬å‘¨å­¦ä¹ æ—¥ç¨‹')" style="background:var(--primary);color:#fff;border:none;border-radius:8px;padding:10px 16px;font-size:13px;cursor:pointer;white-space:nowrap;font-weight:500">
                        ğŸ”„ é‡æ–°ç”Ÿæˆ
                      </button>
                      <button onclick="alert('å¯¼å‡ºåˆ°æ—¥å†åº”ç”¨')" style="background:transparent;color:var(--primary);border:1px solid var(--primary);border-radius:8px;padding:8px 14px;font-size:12px;cursor:pointer;white-space:nowrap;font-weight:500">
                        ğŸ“¤ å¯¼å‡ºæ—¥å†
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- ä»Šæ—¥äº‹é¡¹è§†å›¾ -->
          <section id="todayView" style="display:none;">
            <!-- å¿«é€Ÿå­¦ä¹ å…¥å£ -->
            <div class="card" style="margin-bottom: 20px;">
              <div style="padding: 20px; background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border-radius: 12px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                  <span style="font-size: 18px;">âš¡</span>
                  <span style="font-weight: 700; color: #0369a1; font-size: 16px;">å¿«é€Ÿå­¦ä¹ </span>
                </div>
                <div class="quick-learning-buttons" style="display: flex; gap: 16px; flex-wrap: wrap;">
                  <button class="quick-learning-button" onclick="alert('è¿›å…¥åœ¨çº¿å­¦ä¹ ')" style="background: var(--primary); color: white; border: none; border-radius: 10px; padding: 12px 20px; font-size: 13px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(91,124,255,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <span>ğŸ“–</span> å¼€å§‹å­¦ä¹ 
                  </button>
                  <button class="quick-learning-button" onclick="switchToSchedule()" style="background: #22c55e; color: white; border: none; border-radius: 10px; padding: 12px 20px; font-size: 13px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(34,197,94,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <span>ğŸ“…</span> æŸ¥çœ‹è¯¾è¡¨
                  </button>
                  <button class="quick-learning-button" onclick="document.getElementById('linkTasks').click()" style="background: #f59e0b; color: white; border: none; border-radius: 10px; padding: 12px 20px; font-size: 13px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(245,158,11,0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                    <span>ğŸ“</span> æˆ‘çš„ä½œä¸š
                  </button>
                </div>
              </div>
            </div>
            
            <div class="card">
              <div class="today-header">
                <div style="display: flex; align-items: center; gap: 8px;">
                  <span style="font-size: 18px;">ğŸ“…</span>
                  <h2 style="margin: 0; font-size: 18px;">ä»Šæ—¥äº‹é¡¹</h2>
                </div>
                <div style="color: var(--muted); font-size: 14px;" class="currentDateTime">
                  2025å¹´9æœˆ19æ—¥æ˜ŸæœŸäº” 16:28
                </div>
              </div>
              
              <div class="today-content">
                <!-- å·¦ä¾§ï¼šä»Šæ—¥è¯¾ç¨‹ -->
                <div class="today-courses">
                  <div class="section-header">
                    <span style="font-size: 16px;">ğŸ“š</span>
                    <span style="font-weight: 600;">ä»Šæ—¥è¯¾ç¨‹</span>
                    <a href="#" onclick="switchToSchedule()" style="color: var(--primary); text-decoration: none; font-size: 12px;">æŸ¥çœ‹è¯¾è¡¨</a>
                  </div>
                  
                  <div class="course-timeline">
                    <div class="course-item completed">
                      <div class="course-time">08:00 - 09:40</div>
                      <div class="course-info">
                        <div class="course-title">
                          <span class="course-name">é«˜ç­‰æ•°å­¦</span>
                          <span class="course-status done">å·²å®Œæˆ</span>
                        </div>
                        <div class="course-details">
                          <span>ğŸ“ æ•°å­¦æ¥¼A301</span>
                          <span>ğŸ‘©â€ğŸ« ç‹è€å¸ˆ</span>
                        </div>
                      </div>
                    </div>
                    
                    <div class="course-item current">
                      <div class="course-time">10:00 - 11:40</div>
                      <div class="course-info">
                        <div class="course-title">
                          <span class="course-name">çº¿æ€§ä»£æ•°</span>
                          <span class="course-status ongoing">è¿›è¡Œä¸­</span>
                        </div>
                        <div class="course-details">
                          <span>ğŸ“ æ•°å­¦æ¥¼B205</span>
                          <span>ğŸ‘©â€ğŸ« æè€å¸ˆ</span>
                        </div>
                      </div>
                    </div>
                    
                    <div class="course-item upcoming">
                      <div class="course-time">14:00 - 15:40</div>
                      <div class="course-info">
                        <div class="course-title">
                          <span class="course-name">æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡</span>
                          <span class="course-status coming">æœªå¼€å§‹</span>
                        </div>
                        <div class="course-details">
                          <span>ğŸ“ æ•°å­¦æ¥¼C102</span>
                          <span>ğŸ‘©â€ğŸ« å¼ è€å¸ˆ</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- å³ä¾§ï¼šå¾…åŠäº‹é¡¹ -->
                <div class="today-todos">
                  <div class="section-header">
                    <span style="font-size: 16px;">ğŸ“‹</span>
                    <span style="font-weight: 600;">å¾…åŠäº‹é¡¹</span>
                    <button onclick="addTodoItem()" style="color: var(--primary); background: none; border: none; cursor: pointer; font-size: 12px;">æ·»åŠ </button>
                  </div>
                  
                  <div class="todo-list">
                    <div class="todo-item urgent">
                      <input type="checkbox" id="todo1">
                      <label for="todo1">å®Œæˆé«˜ç­‰æ•°å­¦ä½œä¸š</label>
                      <span class="todo-deadline">æ˜å¤©æˆªæ­¢</span>
                    </div>
                    
                    <div class="todo-item normal">
                      <input type="checkbox" id="todo2">
                      <label for="todo2">é¢„ä¹ çº¿æ€§ä»£æ•°ç¬¬ä¸‰ç« </label>
                      <span class="todo-deadline">3å¤©å</span>
                    </div>
                    
                    <div class="todo-item normal">
                      <input type="checkbox" id="todo3">
                      <label for="todo3">æäº¤å®éªŒæŠ¥å‘Š</label>
                      <span class="todo-deadline">æœ¬å‘¨å†…</span>
                    </div>
                    
                    <div class="todo-item normal">
                      <input type="checkbox" id="todo5">
                      <label for="todo5">å¤ä¹ æ¦‚ç‡è®ºé‡ç‚¹</label>
                      <span class="todo-deadline">å‘¨äº”å‰</span>
                    </div>
                    
                    <div class="todo-item completed">
                      <input type="checkbox" id="todo4" checked>
                      <label for="todo4">è§‚çœ‹æ•°æ®ç»“æ„è¯¾ç¨‹å›æ”¾</label>
                      <span class="todo-deadline">å·²å®Œæˆ</span>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </section>

          <!-- æˆ‘çš„ä»»åŠ¡è§†å›¾ï¼ˆä½œä¸šæ¸…å•ï¼šæœªå®Œæˆè“è‰²ï¼Œå·²å®Œæˆç°è‰²ï¼‰ -->
          <section id="tasksView" style="display:none;">
            <div class="list">
              <div class="item"><div><strong>å®éªŒä½œä¸šï¼šè®¾è®¡æ¨¡å¼ç»¼åˆ</strong><div style="color:var(--muted);font-size:12px">æˆªæ­¢ å‘¨äº” 23:00 Â· 100åˆ†</div></div><span class="status status-blue">æœªå®Œæˆ</span></div>
              <div class="item"><div><strong>ç¼–ç¨‹ä½œä¸šï¼šJava Webåº”ç”¨å¼€å‘</strong><div style="color:var(--muted);font-size:12px">æˆªæ­¢ å‘¨æ—¥ 23:59 Â· 80åˆ†</div></div><span class="status status-blue">æœªå®Œæˆ</span></div>
              <div class="item"><div><strong>éšå ‚ç»ƒä¹ ï¼šè¡Œä¸ºå‹æ¨¡å¼</strong><div style="color:var(--muted);font-size:12px">æˆªæ­¢ ä»Šæ—¥ 24:00 Â· 10åˆ†</div></div><span class="status status-gray">å·²å®Œæˆ</span></div>
              <div class="item"><div><strong>è¯¾å ‚æµ‹éªŒï¼šæ•°æ®ç»“æ„åŸºç¡€</strong><div style="color:var(--muted);font-size:12px">æˆªæ­¢ æ˜¨æ—¥ 18:00 Â· 50åˆ†</div></div><span class="status status-gray">å·²å®Œæˆ</span></div>
            </div>
          </section>

          <!-- æ”¶ä»¶ç®±è§†å›¾ï¼ˆä½œä¸šæé†’ã€è€å¸ˆé€šçŸ¥ï¼‰ -->
          <section id="inboxView" style="display:none;">
            <div class="list">
              <div class="item"><div><strong>ä½œä¸šæé†’</strong><div style="color:var(--muted);font-size:12px">è¯·åœ¨å‘¨äº” 23:00 å‰æäº¤â€œè®¾è®¡æ¨¡å¼ç»¼åˆâ€</div></div><span class="status status-blue">æœªè¯»</span></div>
              <div class="item"><div><strong>è€å¸ˆé€šçŸ¥</strong><div style="color:var(--muted);font-size:12px">å‘¨ä¸‰ 8:30 ä¸Šè¯¾æ—¶é—´è°ƒæ•´ä¸º 8:50</div></div><span class="status status-gray">å·²è¯»</span></div>
              <div class="item"><div><strong>ç³»ç»Ÿé€šçŸ¥</strong><div style="color:var(--muted);font-size:12px">æ‚¨æœ‰æ–°çš„ç¼–ç¨‹ä½œä¸šå¾…å®Œæˆï¼Œè¯·åŠæ—¶æŸ¥çœ‹</div></div><span class="status status-blue">æœªè¯»</span></div>
              <div class="item"><div><strong>æˆç»©å…¬å¸ƒ</strong><div style="color:var(--muted);font-size:12px">æ•°æ®ç»“æ„è¯¾å ‚æµ‹éªŒæˆç»©å·²å…¬å¸ƒï¼Œè¯·æŸ¥çœ‹</div></div><span class="status status-gray">å·²è¯»</span></div>
            </div>
          </section>
        </section>
      </div>
    </main>
  </div>

  <script>
    const scheduleView = document.getElementById('scheduleView');
    const courseListView = document.getElementById('courseListView');
    const tabSchedule = document.getElementById('tabSchedule');
    const tabCourses = document.getElementById('tabCourses');

    function showSchedule() {
      scheduleView.style.display = '';
      courseListView.style.display = 'none';
      tabSchedule.classList.add('active');
      tabCourses.classList.remove('active');
      // ç¡®ä¿é¡¶éƒ¨æ§åˆ¶æ æ˜¾ç¤º
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
      updateFilterOptions('schedule');
    }
    function showCourses() {
      scheduleView.style.display = 'none';
      courseListView.style.display = '';
      tabSchedule.classList.remove('active');
      tabCourses.classList.add('active');
      // ç¡®ä¿é¡¶éƒ¨æ§åˆ¶æ æ˜¾ç¤º
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹ï¼ˆè¯¾ç¨‹åˆ—è¡¨è§†å›¾ä¸éœ€è¦ç­›é€‰ï¼‰
      updateFilterOptions('courses');
    }

    tabSchedule.addEventListener('click', showSchedule);
    tabCourses.addEventListener('click', showCourses);

    // è‹¥é€šè¿‡é‡å®šå‘å¸¦ #courses å“ˆå¸Œè¿›å…¥ï¼Œåˆ™é»˜è®¤æ‰“å¼€â€œè¯¾ç¨‹â€è§†å›¾
    if (location.hash === '#courses') {
      showCourses();
    }

    // ä¾§è¾¹æ ï¼šå­¦ä¹ è·¯å¾„è§„åˆ’
    const linkSchedule = document.getElementById('linkSchedule');
    const linkToday = document.getElementById('linkToday');
    const linkPath = document.getElementById('linkPath');
    const linkTasks = document.getElementById('linkTasks');
    const linkInbox = document.getElementById('linkInbox');
    const todayView = document.getElementById('todayView');
    const pathView = document.getElementById('pathView');
    const tasksView = document.getElementById('tasksView');
    const inboxView = document.getElementById('inboxView');
    
    // å¤„ç†"è¯¾ç¨‹/è¯¾è¡¨"èœå•é¡¹ç‚¹å‡»
    linkSchedule?.addEventListener('click', (e)=>{
      e.preventDefault();
      // æ˜¾ç¤ºè¯¾è¡¨è§†å›¾ï¼Œéšè—å…¶ä»–è§†å›¾
      scheduleView.style.display = '';
      courseListView.style.display = 'none';
      todayView.style.display = 'none';
      pathView.style.display = 'none';
      tasksView.style.display = 'none';
      inboxView.style.display = 'none';
      // æ˜¾ç¤ºé¡¶éƒ¨æ§åˆ¶æ 
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      // æ¿€æ´»è¯¾è¡¨æ ‡ç­¾
      tabSchedule.classList.add('active');
      tabCourses.classList.remove('active');
      // æ›´æ–°ä¾§æ èœå•activeçŠ¶æ€
      document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
      linkSchedule.classList.add('active');
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
      updateFilterOptions('schedule');
    });

    // å¤„ç†"ä»Šæ—¥äº‹é¡¹"èœå•é¡¹ç‚¹å‡»
    linkToday?.addEventListener('click', (e)=>{
      e.preventDefault();
      // æ˜¾ç¤ºä»Šæ—¥äº‹é¡¹è§†å›¾ï¼Œéšè—å…¶ä»–è§†å›¾
      scheduleView.style.display = 'none';
      courseListView.style.display = 'none';
      todayView.style.display = '';
      pathView.style.display = 'none';
      tasksView.style.display = 'none';
      inboxView.style.display = 'none';
      // éšè—é¡¶éƒ¨æ§åˆ¶æ ï¼ˆå­¦æœŸé€‰æ‹©å™¨ã€å‘¨æ•°é€‰æ‹©å™¨ã€è¯¾è¡¨åˆ‡æ¢ç­‰ï¼‰
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'none';
      }
      // å–æ¶ˆè¯¾è¡¨æ ‡ç­¾æ¿€æ´»çŠ¶æ€
      tabSchedule.classList.remove('active');
      tabCourses.classList.remove('active');
      // æ›´æ–°ä¾§æ èœå•activeçŠ¶æ€
      document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
      linkToday.classList.add('active');
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹ï¼ˆä»Šæ—¥äº‹é¡¹ä¸éœ€è¦ç­›é€‰ï¼‰
      updateFilterOptions('today');
    });
    
    linkPath?.addEventListener('click', (e)=>{
      e.preventDefault();
      // æ˜¾ç¤ºè·¯å¾„è§„åˆ’è§†å›¾ï¼Œéšè—å…¶ä»–
      scheduleView.style.display = 'none';
      courseListView.style.display = 'none';
      todayView.style.display = 'none';
      tasksView.style.display = 'none';
      inboxView.style.display = 'none';
      pathView.style.display = '';
      // æ˜¾ç¤ºé¡¶éƒ¨æ§åˆ¶æ 
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      tabSchedule.classList.remove('active');
      tabCourses.classList.remove('active');
      // æ›´æ–°ä¾§æ èœå•activeçŠ¶æ€
      document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
      linkPath.classList.add('active');
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹ï¼ˆå­¦ä¹ è·¯å¾„è§†å›¾ä¸éœ€è¦ç­›é€‰ï¼‰
      updateFilterOptions('path');
    });

    linkTasks?.addEventListener('click', (e)=>{
      e.preventDefault();
      scheduleView.style.display = 'none';
      courseListView.style.display = 'none';
      todayView.style.display = 'none';
      pathView.style.display = 'none';
      inboxView.style.display = 'none';
      tasksView.style.display = '';
      // æ˜¾ç¤ºé¡¶éƒ¨æ§åˆ¶æ 
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      tabSchedule.classList.remove('active');
      tabCourses.classList.remove('active');
      // æ›´æ–°ä¾§æ èœå•activeçŠ¶æ€
      document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
      linkTasks.classList.add('active');
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
      updateFilterOptions('tasks');
    });

    linkInbox?.addEventListener('click', (e)=>{
      e.preventDefault();
      scheduleView.style.display = 'none';
      courseListView.style.display = 'none';
      todayView.style.display = 'none';
      pathView.style.display = 'none';
      tasksView.style.display = 'none';
      inboxView.style.display = '';
      // æ˜¾ç¤ºé¡¶éƒ¨æ§åˆ¶æ 
      const scheduleHeader = document.querySelector('.schedule-header');
      if (scheduleHeader) {
        scheduleHeader.style.display = 'grid';
      }
      tabSchedule.classList.remove('active');
      tabCourses.classList.remove('active');
      // æ›´æ–°ä¾§æ èœå•activeçŠ¶æ€
      document.querySelectorAll('.menu a').forEach(a => a.classList.remove('active'));
      linkInbox.classList.add('active');
      // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹
      updateFilterOptions('inbox');
    });

    // å‘¨æ•°é€‰æ‹©å™¨ï¼ˆç¬¬1å‘¨-ç¬¬20å‘¨ï¼‰ï¼Œçª—å£æ˜¾ç¤º5ä¸ªé¡¹ï¼Œå¯å·¦å³ç®­å¤´åˆ‡æ¢
    (function(){
      const total = 20;
      let current = 2;
      const list = document.getElementById('wpList');
      const all = document.getElementById('wpAll');
      const overlay = document.getElementById('wpOverlay');
      const closeBtn = document.getElementById('wpClose');
      const prev = document.getElementById('wpPrev');
      const next = document.getElementById('wpNext');
      const toggle = document.getElementById('wpToggle');
      const currentText = document.getElementById('wpCurrent');

      function renderWindow(){
        if(!list) return;
        list.innerHTML = '';
        let start = Math.max(1, Math.min(current - 2, total - 4));
        for(let w=start; w<=Math.min(total, start+4); w++){
          const btn = document.createElement('button');
          btn.className = 'wp-num' + (w===current?' active':'');
          btn.textContent = w;
          btn.onclick = ()=>{ current = w; update(); };
          list.appendChild(btn);
        }
      }
      function renderAll(){
        if(!all) return;
        all.innerHTML = '';
        for(let w=1; w<=total; w++){
          const chip = document.createElement('button');
          chip.className = 'wp-chip';
          chip.textContent = 'ç¬¬'+w+'å‘¨';
          chip.onclick = ()=>{ current = w; update(); };
          all.appendChild(chip);
        }
      }
      function update(){
        renderWindow(); 
        currentText.textContent = 'ç¬¬'+current+'å‘¨';
        
        // æ§åˆ¶æœŸæœ«å†²åˆºæŒ‰é’®æ˜¾ç¤º
        const finalSprintBtn = document.getElementById('finalSprintBtn');
        if (finalSprintBtn) {
          if (current >= 8) {
            finalSprintBtn.style.display = 'block';
          } else {
            finalSprintBtn.style.display = 'none';
          }
        }
      }
      prev?.addEventListener('click', ()=>{ if(current>1){ current--; update(); } });
      next?.addEventListener('click', ()=>{ if(current<total){ current++; update(); } });
      function openModal(){ renderAll(); overlay.style.display='flex'; }
      function closeModal(){ overlay.style.display='none'; }
      toggle?.addEventListener('click', openModal);
      overlay?.addEventListener('click', (e)=>{ if(e.target===overlay) closeModal(); });
      closeBtn?.addEventListener('click', closeModal);
      update();
    })();

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç­›é€‰å™¨é€‰é¡¹
    document.addEventListener('DOMContentLoaded', function() {
      updateFilterOptions('schedule'); // é»˜è®¤éšè—ç­›é€‰å™¨ï¼ˆè¯¾ç¨‹è¡¨è§†å›¾ï¼‰
      updateCurrentTime(); // åˆå§‹åŒ–æ—¶é—´æ˜¾ç¤º
      setInterval(updateCurrentTime, 60000); // æ¯åˆ†é’Ÿæ›´æ–°æ—¶é—´
    });

    // æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤º
    function updateCurrentTime() {
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth() + 1;
      const date = now.getDate();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      
      const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
      const weekday = weekdays[now.getDay()];
      
      const timeString = `${year}å¹´${month}æœˆ${date}æ—¥${weekday} ${hours}:${minutes}`;
      
      // æ›´æ–°æ‰€æœ‰æ—¶é—´æ˜¾ç¤ºå…ƒç´ 
      const dateTimeElements = document.querySelectorAll('.currentDateTime, #currentDateTime');
      dateTimeElements.forEach(element => {
        if (element) {
          element.textContent = timeString;
        }
      });
    }

    // æ·»åŠ å¾…åŠäº‹é¡¹
    function addTodoItem() {
      const todoText = prompt('è¯·è¾“å…¥å¾…åŠäº‹é¡¹ï¼š');
      if (todoText && todoText.trim()) {
        const todoList = document.querySelector('.todo-list');
        const newTodoId = 'todo' + Date.now();
        
        const todoItem = document.createElement('div');
        todoItem.className = 'todo-item normal';
        todoItem.innerHTML = `
          <input type="checkbox" id="${newTodoId}" onchange="toggleTodoStatus(this)">
          <label for="${newTodoId}">${todoText.trim()}</label>
          <span class="todo-deadline">åˆšåˆšæ·»åŠ </span>
        `;
        
        // æ’å…¥åˆ°æœ€åä¸€ä¸ªæœªå®Œæˆé¡¹ç›®ä¹‹å
        const completedItems = todoList.querySelectorAll('.todo-item.completed');
        if (completedItems.length > 0) {
          todoList.insertBefore(todoItem, completedItems[0]);
        } else {
          todoList.appendChild(todoItem);
        }
        
        console.log('å·²æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹:', todoText.trim());
      }
    }

    // åˆ‡æ¢å¾…åŠäº‹é¡¹çŠ¶æ€
    function toggleTodoStatus(checkbox) {
      const todoItem = checkbox.closest('.todo-item');
      const deadline = todoItem.querySelector('.todo-deadline');
      
      if (checkbox.checked) {
        todoItem.classList.add('completed');
        todoItem.classList.remove('urgent', 'normal');
        deadline.textContent = 'å·²å®Œæˆ';
        
        // ç§»åŠ¨åˆ°åˆ—è¡¨æœ«å°¾
        const todoList = todoItem.parentNode;
        todoList.appendChild(todoItem);
      } else {
        todoItem.classList.remove('completed');
        todoItem.classList.add('normal');
        deadline.textContent = 'å¾…å®Œæˆ';
        
        // ç§»åŠ¨åˆ°æœªå®Œæˆé¡¹ç›®åŒºåŸŸ
        const todoList = todoItem.parentNode;
        const completedItems = todoList.querySelectorAll('.todo-item.completed');
        if (completedItems.length > 1) {
          todoList.insertBefore(todoItem, completedItems[0]);
        } else {
          const firstCompleted = todoList.querySelector('.todo-item.completed');
          if (firstCompleted) {
            todoList.insertBefore(todoItem, firstCompleted);
          }
        }
      }
    }

    // åˆ‡æ¢åˆ°è¯¾è¡¨è§†å›¾
    function switchToSchedule() {
      // ç‚¹å‡»è¯¾ç¨‹/è¯¾è¡¨èœå•é¡¹
      if (linkSchedule) {
        linkSchedule.click();
      }
    }

    // ä¸ºç°æœ‰çš„å¾…åŠäº‹é¡¹æ·»åŠ äº¤äº’åŠŸèƒ½
    document.addEventListener('DOMContentLoaded', function() {
      const todoCheckboxes = document.querySelectorAll('#todayView .todo-item input[type="checkbox"]');
      todoCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          toggleTodoStatus(this);
        });
      });
    });

    // ä¸ªäººä¸­å¿ƒå’Œé€€å‡ºåŠŸèƒ½
    function goToProfile() {
      window.location.href = 'profile.html';
    }

    function logout() {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        alert('å·²é€€å‡ºç™»å½•');
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„é€€å‡ºé€»è¾‘
        // window.location.href = 'login.html';
      }
    }

    // é¢˜ç›®æ¨èç³»ç»Ÿ
    const questionBank = {
      'æé™': {
        description: 'é’ˆå¯¹63%é”™é¢˜ç‡çš„è–„å¼±ç¯èŠ‚ï¼Œä¸ºä½ æ¨èåŸºç¡€å·©å›ºé¢˜ç›®',
        difficulty: 'åŸºç¡€å¼ºåŒ–',
        color: '#ef4444',
        questions: [
          {
            id: 1,
            question: 'æ±‚æé™ lim(xâ†’0) (sin x)/x',
            options: ['A. 0', 'B. 1', 'C. âˆ', 'D. ä¸å­˜åœ¨'],
            answer: 'B',
            explanation: 'è¿™æ˜¯é‡è¦æé™å…¬å¼ï¼Œlim(xâ†’0) (sin x)/x = 1',
            type: 'é‡è¦æé™'
          },
          {
            id: 2,
            question: 'æ±‚æé™ lim(xâ†’âˆ) (1 + 1/x)^x',
            options: ['A. 1', 'B. e', 'C. âˆ', 'D. 0'],
            answer: 'B',
            explanation: 'è¿™æ˜¯ç¬¬äºŒä¸ªé‡è¦æé™ï¼Œç»“æœä¸ºè‡ªç„¶å¸¸æ•°e',
            type: 'é‡è¦æé™'
          },
          {
            id: 3,
            question: 'æ±‚æé™ lim(xâ†’2) (xÂ²-4)/(x-2)',
            options: ['A. 0', 'B. 2', 'C. 4', 'D. ä¸å­˜åœ¨'],
            answer: 'C',
            explanation: 'åˆ†å­å¯åˆ†è§£ä¸º(x-2)(x+2)ï¼Œçº¦å»åˆ†æ¯åå¾—åˆ°x+2ï¼Œå½“xâ†’2æ—¶ç»“æœä¸º4',
            type: '0/0å‹æé™'
          }
        ]
      },
      'å¯¼æ•°': {
        description: 'é’ˆå¯¹51%é”™é¢˜ç‡ï¼Œé‡ç‚¹ç»ƒä¹ æ±‚å¯¼æ³•åˆ™å’Œè®¡ç®—æŠ€å·§',
        difficulty: 'è¿›é˜¶æå‡',
        color: '#f59e0b',
        questions: [
          {
            id: 1,
            question: 'å‡½æ•° f(x) = xÂ³ + 2xÂ² - 5x + 1 çš„å¯¼æ•°æ˜¯',
            options: ['A. 3xÂ² + 4x - 5', 'B. xÂ² + 4x - 5', 'C. 3xÂ² + 2x - 5', 'D. 3xÂ² + 4x'],
            answer: 'A',
            explanation: 'å¤šé¡¹å¼æ±‚å¯¼ï¼šæ¯ä¸€é¡¹çš„å¯¼æ•°åˆ†åˆ«ä¸º3xÂ²ã€4xã€-5ã€0',
            type: 'åŸºæœ¬æ±‚å¯¼'
          },
          {
            id: 2,
            question: 'å¤åˆå‡½æ•° y = sin(2x + 1) çš„å¯¼æ•°æ˜¯',
            options: ['A. cos(2x + 1)', 'B. 2cos(2x + 1)', 'C. sin(2x)', 'D. 2sin(2x + 1)'],
            answer: 'B',
            explanation: 'ä½¿ç”¨é“¾å¼æ³•åˆ™ï¼šå¤–å‡½æ•°å¯¼æ•°sin\'(u) = cos(u)ï¼Œå†…å‡½æ•°å¯¼æ•°(2x+1)\' = 2',
            type: 'å¤åˆå‡½æ•°æ±‚å¯¼'
          },
          {
            id: 3,
            question: 'å‡½æ•° y = xÂ²e^x çš„å¯¼æ•°æ˜¯',
            options: ['A. 2xe^x', 'B. xÂ²e^x', 'C. (2x + xÂ²)e^x', 'D. 2x + e^x'],
            answer: 'C',
            explanation: 'ä½¿ç”¨ä¹˜ç§¯æ³•åˆ™ï¼š(uv)\' = u\'v + uv\'ï¼Œå¾—åˆ°2xÂ·e^x + xÂ²Â·e^x = (2x + xÂ²)e^x',
            type: 'ä¹˜ç§¯æ³•åˆ™'
          }
        ]
      },
      'å¾®åˆ†åº”ç”¨': {
        description: 'ä¿æŒè‰¯å¥½çŠ¶æ€ï¼Œç»§ç»­å·©å›ºå¾®åˆ†åœ¨å®é™…é—®é¢˜ä¸­çš„åº”ç”¨',
        difficulty: 'å·©å›ºä¿æŒ',
        color: '#22c55e',
        questions: [
          {
            id: 1,
            question: 'æ›²çº¿ y = xÂ³ - 3x + 2 åœ¨ç‚¹(1, 0)å¤„çš„åˆ‡çº¿æ–¹ç¨‹æ˜¯',
            options: ['A. y = 0', 'B. y = x - 1', 'C. y = -x + 1', 'D. y = 3x - 3'],
            answer: 'A',
            explanation: 'å…ˆæ±‚å¯¼y\' = 3xÂ² - 3ï¼Œåœ¨x=1å¤„æ–œç‡ä¸º0ï¼Œæ‰€ä»¥åˆ‡çº¿æ–¹ç¨‹ä¸ºy = 0',
            type: 'åˆ‡çº¿æ–¹ç¨‹'
          },
          {
            id: 2,
            question: 'å‡½æ•° f(x) = xÂ³ - 6xÂ² + 9x + 1 çš„å•è°ƒé€’å¢åŒºé—´æ˜¯',
            options: ['A. (-âˆ, 1)âˆª(3, +âˆ)', 'B. (1, 3)', 'C. (-âˆ, +âˆ)', 'D. (0, 2)'],
            answer: 'A',
            explanation: 'f\'(x) = 3xÂ² - 12x + 9 = 3(x-1)(x-3)ï¼Œå½“x<1æˆ–x>3æ—¶f\'(x)>0',
            type: 'å•è°ƒæ€§'
          },
          {
            id: 3,
            question: 'å‡½æ•° f(x) = xâ´ - 2xÂ² + 3 çš„æå€¼ç‚¹æ˜¯',
            options: ['A. x = 0', 'B. x = Â±1', 'C. x = Â±2', 'D. x = 0, Â±1'],
            answer: 'D',
            explanation: 'f\'(x) = 4xÂ³ - 4x = 4x(xÂ² - 1) = 4x(x-1)(x+1)ï¼Œé©»ç‚¹ä¸ºx = 0, Â±1',
            type: 'æå€¼é—®é¢˜'
          }
        ]
      },
      'ç§¯åˆ†': {
        description: 'æå‡ç©ºé—´è¾ƒå¤§ï¼Œä»åŸºç¡€ç§¯åˆ†å…¬å¼å¼€å§‹å¼ºåŒ–ç»ƒä¹ ',
        difficulty: 'é‡ç‚¹æå‡',
        color: '#f59e0b',
        questions: [
          {
            id: 1,
            question: 'ä¸å®šç§¯åˆ† âˆ«2x dx ç­‰äº',
            options: ['A. xÂ² + C', 'B. 2xÂ² + C', 'C. xÂ²/2 + C', 'D. 2x + C'],
            answer: 'A',
            explanation: 'âˆ«2x dx = 2âˆ«x dx = 2 Â· xÂ²/2 + C = xÂ² + C',
            type: 'åŸºæœ¬ç§¯åˆ†'
          },
          {
            id: 2,
            question: 'å®šç§¯åˆ† âˆ«[0,1] 3xÂ² dx çš„å€¼æ˜¯',
            options: ['A. 0', 'B. 1', 'C. 2', 'D. 3'],
            answer: 'B',
            explanation: 'âˆ«3xÂ² dx = xÂ³ + Cï¼Œä»£å…¥ä¸Šä¸‹é™ï¼š1Â³ - 0Â³ = 1',
            type: 'å®šç§¯åˆ†è®¡ç®—'
          },
          {
            id: 3,
            question: 'ä¸å®šç§¯åˆ† âˆ«e^x dx ç­‰äº',
            options: ['A. e^x + C', 'B. xe^x + C', 'C. e^x/x + C', 'D. ln(e^x) + C'],
            answer: 'A',
            explanation: 'æŒ‡æ•°å‡½æ•°çš„ç§¯åˆ†å°±æ˜¯å…¶æœ¬èº«ï¼šâˆ«e^x dx = e^x + C',
            type: 'æŒ‡æ•°ç§¯åˆ†'
          }
        ]
      }
    };

    function showRecommendedQuestions(topic) {
      const modal = document.getElementById('questionModal');
      const title = document.getElementById('modalTitle');
      const content = document.getElementById('questionContent');
      
      const topicData = questionBank[topic];
      if (!topicData) return;

      title.textContent = `${topic} - ${topicData.difficulty}`;
      
      let html = `
        <div style="background:linear-gradient(135deg, ${topicData.color}15, ${topicData.color}08);border:1px solid ${topicData.color}30;border-radius:8px;padding:12px;margin-bottom:20px">
          <div style="color:${topicData.color};font-weight:600;margin-bottom:4px">ğŸ“Š å­¦ä¹ åˆ†æ</div>
          <div style="color:var(--text);font-size:14px">${topicData.description}</div>
        </div>
        
        <div style="margin-bottom:16px">
          <div style="font-weight:600;margin-bottom:8px">ğŸ¯ æ¨èç»ƒä¹ é¢˜ç›®</div>
          <div style="color:var(--muted);font-size:13px">æ ¹æ®ä½ çš„è–„å¼±ç¯èŠ‚æ™ºèƒ½æ¨èï¼Œå®Œæˆåç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•å­¦ä¹ è¿›åº¦</div>
        </div>
      `;

      topicData.questions.forEach((q, index) => {
        html += `
          <div style="border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:12px;background:#fff">
            <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px">
              <span style="background:${topicData.color};color:#fff;border-radius:4px;padding:2px 6px;font-size:11px">${q.type}</span>
              <span style="color:var(--muted);font-size:12px">é¢˜ç›® ${index + 1}</span>
            </div>
            
            <div style="font-weight:600;margin-bottom:12px;color:var(--text)">${q.question}</div>
            
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px">
              ${q.options.map(option => `
                <label style="display:flex;align-items:center;gap:6px;padding:6px;border:1px solid var(--border);border-radius:6px;cursor:pointer;transition:all 0.2s" 
                       onmouseover="this.style.background='#f8fafc'" 
                       onmouseout="this.style.background='#fff'">
                  <input type="radio" name="q${q.id}" value="${option[0]}" style="margin:0">
                  <span style="font-size:13px">${option}</span>
                </label>
              `).join('')}
            </div>
            
            <div style="display:flex;gap:8px">
              <button onclick="checkAnswer(${q.id}, '${q.answer}', '${q.explanation}')" 
                      style="background:var(--primary);color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:12px;cursor:pointer">
                æ£€æŸ¥ç­”æ¡ˆ
              </button>
              <div id="result${q.id}" style="display:none;padding:8px;border-radius:6px;font-size:12px"></div>
            </div>
          </div>
        `;
      });

      html += `
        <div style="margin-top:20px;padding:16px;background:linear-gradient(135deg, #f0f9ff, #e0f2fe);border:1px solid #0ea5e9;border-radius:8px">
          <div style="font-weight:600;color:#0369a1;margin-bottom:8px">ğŸ’¡ å­¦ä¹ å»ºè®®</div>
          <div style="color:var(--text);font-size:13px;line-height:1.4">
            å®Œæˆç»ƒä¹ åå»ºè®®ï¼š<br>
            â€¢ é”™é¢˜è¦åŠæ—¶å¤ä¹ ï¼Œç†è§£è§£é¢˜æ€è·¯<br>
            â€¢ å¯ä»¥è§‚çœ‹ç›¸å…³è¯¾ç¨‹å›æ”¾åŠ æ·±ç†è§£<br>
            â€¢ å®šæœŸé‡åšé”™é¢˜ï¼Œç¡®ä¿çœŸæ­£æŒæ¡
          </div>
        </div>
      `;

      content.innerHTML = html;
      modal.style.display = 'flex';
      
      // è®°å½•æ¨èè¡Œä¸º
      console.log(`ä¸ºç”¨æˆ·æ¨èäº†${topic}ç›¸å…³é¢˜ç›®ï¼Œå…±${topicData.questions.length}é“`);
    }

    function checkAnswer(questionId, correctAnswer, explanation) {
      const selectedOption = document.querySelector(`input[name="q${questionId}"]:checked`);
      const resultDiv = document.getElementById(`result${questionId}`);
      
      if (!selectedOption) {
        alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
        return;
      }
      
      const userAnswer = selectedOption.value;
      const isCorrect = userAnswer === correctAnswer;
      
      resultDiv.style.display = 'block';
      
      if (isCorrect) {
        resultDiv.style.background = '#dcfce7';
        resultDiv.style.color = '#166534';
        resultDiv.style.border = '1px solid #bbf7d0';
        resultDiv.innerHTML = `âœ… å›ç­”æ­£ç¡®ï¼<br><span style="font-size:11px">${explanation}</span>`;
      } else {
        resultDiv.style.background = '#fee2e2';
        resultDiv.style.color = '#991b1b';
        resultDiv.style.border = '1px solid #fecaca';
        resultDiv.innerHTML = `âŒ ç­”æ¡ˆé”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ ${correctAnswer}<br><span style="font-size:11px">${explanation}</span>`;
      }
    }

    function closeQuestionModal() {
      document.getElementById('questionModal').style.display = 'none';
    }

    function showDailyMixedQuestions() {
      const modal = document.getElementById('questionModal');
      const title = document.getElementById('modalTitle');
      const content = document.getElementById('questionContent');
      
      title.textContent = 'ç»¼åˆç»ƒä¹  - æ¯æ—¥æ¨è';
      
      // ä»æœ€è–„å¼±çš„ä¸¤ä¸ªç§‘ç›®ä¸­å„é€‰ä¸€é¢˜
      const limitQuestion = questionBank['æé™'].questions[0];
      const derivativeQuestion = questionBank['å¯¼æ•°'].questions[0];
      
      let html = `
        <div style="background:linear-gradient(135deg, #f3e8ff, #ede9fe);border:1px solid #8b5cf6;border-radius:8px;padding:12px;margin-bottom:20px">
          <div style="color:#7c3aed;font-weight:600;margin-bottom:4px">ğŸ² æ™ºèƒ½ç»„åˆç»ƒä¹ </div>
          <div style="color:var(--text);font-size:14px">æ ¹æ®ä½ çš„è–„å¼±ç¯èŠ‚ï¼Œä¸ºä½ ç²¾é€‰äº†æé™å’Œå¯¼æ•°çš„é‡ç‚¹é¢˜ç›®ï¼Œå»ºè®®åœ¨15åˆ†é’Ÿå†…å®Œæˆ</div>
        </div>
        
        <div style="margin-bottom:16px">
          <div style="font-weight:600;margin-bottom:8px">ğŸ¯ ä»Šæ—¥ç»ƒä¹ è®¡åˆ’ (å…±2é¢˜)</div>
          <div style="color:var(--muted);font-size:13px">å®Œæˆåå°†æ›´æ–°ä½ çš„å­¦ä¹ è¿›åº¦ï¼Œä¼˜ç§€è¡¨ç°å°†è§£é”æ–°çš„å­¦ä¹ å†…å®¹</div>
        </div>
      `;

      // æé™é¢˜ç›®
      html += `
        <div style="border:1px solid #ef4444;border-radius:10px;padding:16px;margin-bottom:12px;background:#fff">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px">
            <span style="background:#ef4444;color:#fff;border-radius:4px;padding:2px 6px;font-size:11px">æé™ - é‡è¦æé™</span>
            <span style="color:var(--muted);font-size:12px">è–„å¼±ç¯èŠ‚ä¸“ç»ƒ</span>
            <span style="background:#fef3c7;color:#b45309;border-radius:4px;padding:1px 4px;font-size:10px">é«˜ä¼˜å…ˆçº§</span>
          </div>
          
          <div style="font-weight:600;margin-bottom:12px;color:var(--text)">${limitQuestion.question}</div>
          
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px">
            ${limitQuestion.options.map(option => `
              <label style="display:flex;align-items:center;gap:6px;padding:6px;border:1px solid var(--border);border-radius:6px;cursor:pointer;transition:all 0.2s" 
                     onmouseover="this.style.background='#fef2f2'" 
                     onmouseout="this.style.background='#fff'">
                <input type="radio" name="mixed_q1" value="${option[0]}" style="margin:0">
                <span style="font-size:13px">${option}</span>
              </label>
            `).join('')}
          </div>
          
          <div style="display:flex;gap:8px">
            <button onclick="checkMixedAnswer(1, '${limitQuestion.answer}', '${limitQuestion.explanation}')" 
                    style="background:#ef4444;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:12px;cursor:pointer">
              æ£€æŸ¥ç­”æ¡ˆ
            </button>
            <div id="mixedResult1" style="display:none;padding:8px;border-radius:6px;font-size:12px"></div>
          </div>
        </div>
      `;

      // å¯¼æ•°é¢˜ç›®
      html += `
        <div style="border:1px solid #f59e0b;border-radius:10px;padding:16px;margin-bottom:12px;background:#fff">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px">
            <span style="background:#f59e0b;color:#fff;border-radius:4px;padding:2px 6px;font-size:11px">å¯¼æ•° - åŸºæœ¬æ±‚å¯¼</span>
            <span style="color:var(--muted);font-size:12px">è–„å¼±ç¯èŠ‚ä¸“ç»ƒ</span>
            <span style="background:#fff7e6;color:#b45309;border-radius:4px;padding:1px 4px;font-size:10px">ä¸­ä¼˜å…ˆçº§</span>
          </div>
          
          <div style="font-weight:600;margin-bottom:12px;color:var(--text)">${derivativeQuestion.question}</div>
          
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px">
            ${derivativeQuestion.options.map(option => `
              <label style="display:flex;align-items:center;gap:6px;padding:6px;border:1px solid var(--border);border-radius:6px;cursor:pointer;transition:all 0.2s" 
                     onmouseover="this.style.background='#fffbeb'" 
                     onmouseout="this.style.background='#fff'">
                <input type="radio" name="mixed_q2" value="${option[0]}" style="margin:0">
                <span style="font-size:13px">${option}</span>
              </label>
            `).join('')}
          </div>
          
          <div style="display:flex;gap:8px">
            <button onclick="checkMixedAnswer(2, '${derivativeQuestion.answer}', '${derivativeQuestion.explanation}')" 
                    style="background:#f59e0b;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:12px;cursor:pointer">
              æ£€æŸ¥ç­”æ¡ˆ
            </button>
            <div id="mixedResult2" style="display:none;padding:8px;border-radius:6px;font-size:12px"></div>
          </div>
        </div>
      `;

      html += `
        <div style="margin-top:20px;padding:16px;background:linear-gradient(135deg, #f0f9ff, #e0f2fe);border:1px solid #0ea5e9;border-radius:8px">
          <div style="font-weight:600;color:#0369a1;margin-bottom:8px">ğŸ“ˆ å­¦ä¹ ç›®æ ‡</div>
          <div style="color:var(--text);font-size:13px;line-height:1.4">
            å®Œæˆä»Šæ—¥ç»¼åˆç»ƒä¹ åï¼š<br>
            â€¢ æé™é”™é¢˜ç‡æœ‰æœ›ä»63%é™è‡³50%ä»¥ä¸‹<br>
            â€¢ å¯¼æ•°é”™é¢˜ç‡æœ‰æœ›ä»51%é™è‡³40%ä»¥ä¸‹<br>
            â€¢ è§£é”æ›´é«˜éš¾åº¦çš„å¾®åˆ†åº”ç”¨é¢˜ç›®
          </div>
        </div>
      `;

      content.innerHTML = html;
      modal.style.display = 'flex';
      
      // è®°å½•ç»¼åˆç»ƒä¹ å¯åŠ¨
      console.log('ç”¨æˆ·å¼€å§‹ç»¼åˆç»ƒä¹ ï¼ŒåŒ…å«æé™å’Œå¯¼æ•°é¢˜ç›®å„1é“');
    }

    function checkMixedAnswer(questionNum, correctAnswer, explanation) {
      const selectedOption = document.querySelector(`input[name="mixed_q${questionNum}"]:checked`);
      const resultDiv = document.getElementById(`mixedResult${questionNum}`);
      
      if (!selectedOption) {
        alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
        return;
      }
      
      const userAnswer = selectedOption.value;
      const isCorrect = userAnswer === correctAnswer;
      
      resultDiv.style.display = 'block';
      
      if (isCorrect) {
        resultDiv.style.background = '#dcfce7';
        resultDiv.style.color = '#166534';
        resultDiv.style.border = '1px solid #bbf7d0';
        resultDiv.innerHTML = `âœ… æ­£ç¡®ï¼+10åˆ†<br><span style="font-size:11px">${explanation}</span>`;
      } else {
        resultDiv.style.background = '#fee2e2';
        resultDiv.style.color = '#991b1b';
        resultDiv.style.border = '1px solid #fecaca';
        resultDiv.innerHTML = `âŒ é”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ ${correctAnswer}<br><span style="font-size:11px">${explanation}</span>`;
      }
    }

    // å­¦ä¹ è·¯å¾„æ•°æ®é…ç½®
    const learningPathData = {
      'é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰': {
        recommendation: {
          text: 'æ£€æµ‹åˆ°æé™å’Œå¯¼æ•°æŒæ¡è–„å¼±ï¼Œå»ºè®®ä¼˜å…ˆç»ƒä¹ ä»¥ä¸‹å†…å®¹',
          buttons: [
            { topic: 'æé™', label: 'æé™ä¸“ç»ƒ (é”™é¢˜ç‡63%)', color: '#ef4444', icon: 'ğŸ”¥' },
            { topic: 'å¯¼æ•°', label: 'å¯¼æ•°å¼ºåŒ– (é”™é¢˜ç‡51%)', color: '#f59e0b', icon: 'âš¡' },
            { topic: 'ç»¼åˆ', label: 'ç»¼åˆç»ƒä¹ ', color: '#8b5cf6', icon: 'ğŸ²' }
          ]
        },
        nodes: [
          { name: 'æé™', status: 'é”™é¢˜ç‡ 63%', color: '#ef4444', action: 'showRecommendedQuestions("æé™")', links: [{ text: 'çœ‹å›æ”¾å·©å›º', href: 'liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=replay&from=schedule' }] },
          { name: 'å¯¼æ•°', status: 'é”™é¢˜ç‡ 51%', color: '#ef4444', action: 'showRecommendedQuestions("å¯¼æ•°")', links: [{ text: 'è¿›å…¥è¯¾å ‚ç­”ç–‘', href: 'liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=live&from=schedule&status=not-started' }] },
          { name: 'å¾®åˆ†åº”ç”¨', status: 'æŒæ¡è‰¯å¥½', color: '#16a34a', action: 'showRecommendedQuestions("å¾®åˆ†åº”ç”¨")', links: [{ text: 'åˆ·é¢˜ä¿æŒ', href: 'course_detail.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰' }] },
          { name: 'ç§¯åˆ†', status: 'ä¸€èˆ¬', color: '#f59e0b', action: 'showRecommendedQuestions("ç§¯åˆ†")', links: [{ text: 'è®¾å®šå­¦ä¹ è®¡åˆ’', href: 'liveroom_off.html?course=é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰&mode=live&from=schedule&status=not-started' }] }
        ],
        schedule: [
          { name: 'æé™ä¸“é¡¹ç»ƒä¹ ', time: 'å‘¨äºŒ 19:00-20:00', color: '#ef4444' },
          { name: 'å¯¼æ•°å¼ºåŒ–è®­ç»ƒ', time: 'å‘¨å›› 16:00-17:30', color: '#f59e0b' },
          { name: 'å¾®åˆ†åº”ç”¨å¤ä¹ ', time: 'å‘¨æ—¥ 14:00-15:00', color: '#22c55e' }
        ]
      },
      'å¤§å­¦ç‰©ç†': {
        recommendation: {
          text: 'åŠ›å­¦åŸºç¡€æ‰å®ï¼Œå»ºè®®é‡ç‚¹å…³æ³¨ç”µå­¦å’Œå…‰å­¦å†…å®¹',
          buttons: [
            { topic: 'ç”µå­¦', label: 'ç”µå­¦å¼ºåŒ– (æŒæ¡åº¦78%)', color: '#f59e0b', icon: 'âš¡' },
            { topic: 'å…‰å­¦', label: 'å…‰å­¦ç»ƒä¹  (æŒæ¡åº¦65%)', color: '#8b5cf6', icon: 'ğŸ”¬' },
            { topic: 'åŠ›å­¦', label: 'åŠ›å­¦å·©å›º', color: '#22c55e', icon: 'ğŸ’ª' }
          ]
        },
        nodes: [
          { name: 'åŠ›å­¦', status: 'æŒæ¡è‰¯å¥½', color: '#16a34a', action: 'alert("åŠ›å­¦å·©å›ºç»ƒä¹ ")', links: [{ text: 'æŒç»­ç»ƒä¹ ', href: '#' }] },
          { name: 'çƒ­å­¦', status: 'æŒæ¡åº¦ 82%', color: '#16a34a', action: 'alert("çƒ­å­¦ç»ƒä¹ ")', links: [{ text: 'è§‚çœ‹å®éªŒ', href: '#' }] },
          { name: 'ç”µå­¦', status: 'éœ€è¦åŠ å¼º', color: '#f59e0b', action: 'alert("ç”µå­¦å¼ºåŒ–")', links: [{ text: 'ç”µè·¯åˆ†æ', href: '#' }] },
          { name: 'å…‰å­¦', status: 'å¾…æå‡', color: '#8b5cf6', action: 'alert("å…‰å­¦ç»ƒä¹ ")', links: [{ text: 'å®éªŒæ“ä½œ', href: '#' }] }
        ],
        schedule: [
          { name: 'åŠ›å­¦å®éªŒå¤ä¹ ', time: 'å‘¨ä¸€ 14:00-16:00', color: '#22c55e' },
          { name: 'ç”µè·¯åˆ†æç»ƒä¹ ', time: 'å‘¨ä¸‰ 19:00-20:30', color: '#f59e0b' },
          { name: 'å…‰å­¦å®éªŒé¢„ä¹ ', time: 'å‘¨å…­ 10:00-11:30', color: '#8b5cf6' }
        ]
      },
      'è®¡ç®—æœºå¯¼è®º': {
        recommendation: {
          text: 'äºŒè¿›åˆ¶å’Œé€»è¾‘é—¨æ¦‚å¿µè–„å¼±ï¼Œå»ºè®®ä»åŸºç¡€å¼€å§‹å¼ºåŒ–',
          buttons: [
            { topic: 'äºŒè¿›åˆ¶', label: 'äºŒè¿›åˆ¶ä¸“ç»ƒ (é”™é¢˜ç‡71%)', color: '#ef4444', icon: 'ğŸ”¢' },
            { topic: 'é€»è¾‘é—¨', label: 'é€»è¾‘é—¨å¼ºåŒ– (é”™é¢˜ç‡58%)', color: '#f59e0b', icon: 'âš¡' },
            { topic: 'ç»¼åˆ', label: 'ç»¼åˆç»ƒä¹ ', color: '#8b5cf6', icon: 'ğŸ’»' }
          ]
        },
        nodes: [
          { name: 'äºŒè¿›åˆ¶', status: 'é”™é¢˜ç‡ 71%', color: '#ef4444', action: 'alert("äºŒè¿›åˆ¶ä¸“é¡¹ç»ƒä¹ ")', links: [{ text: 'åŸºç¡€æ¦‚å¿µ', href: '#' }] },
          { name: 'é€»è¾‘é—¨', status: 'é”™é¢˜ç‡ 58%', color: '#f59e0b', action: 'alert("é€»è¾‘é—¨ç»ƒä¹ ")', links: [{ text: 'ç”µè·¯è®¾è®¡', href: '#' }] },
          { name: 'ç®—æ³•åŸºç¡€', status: 'æŒæ¡åº¦ 45%', color: '#f59e0b', action: 'alert("ç®—æ³•ç»ƒä¹ ")', links: [{ text: 'æµç¨‹å›¾', href: '#' }] },
          { name: 'ç¨‹åºè®¾è®¡', status: 'å¾…å­¦ä¹ ', color: '#6b7280', action: 'alert("ç¨‹åºè®¾è®¡å…¥é—¨")', links: [{ text: 'ç¼–ç¨‹åŸºç¡€', href: '#' }] }
        ],
        schedule: [
          { name: 'äºŒè¿›åˆ¶è½¬æ¢ç»ƒä¹ ', time: 'å‘¨ä¸€ 18:00-19:00', color: '#ef4444' },
          { name: 'é€»è¾‘é—¨ç”µè·¯è®¾è®¡', time: 'å‘¨å›› 15:00-16:30', color: '#f59e0b' },
          { name: 'ç®—æ³•æ€ç»´è®­ç»ƒ', time: 'å‘¨å…­ 9:00-10:30', color: '#8b5cf6' }
        ]
      }
    };

    let currentCourse = 'é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰';

    function updateCourseSelection(courseName) {
      // é‡ç½®æ‰€æœ‰è¯¾ç¨‹å¡ç‰‡æ ·å¼å¹¶æ¸…é™¤é€‰ä¸­æç¤º
      const allCourses = ['course-math', 'course-physics', 'course-computer'];
      allCourses.forEach(courseId => {
        const element = document.getElementById(courseId);
        element.style.border = '1px solid var(--border)';
        element.style.background = '#fff';
        
        // æ¸…é™¤æ‰€æœ‰"å½“å‰é€‰ä¸­"æç¤º
        const indicators = element.querySelectorAll('div');
        indicators.forEach(div => {
          if (div.textContent.includes('å½“å‰é€‰ä¸­')) {
            div.remove();
          }
        });
      });

      // è®¾ç½®é€‰ä¸­è¯¾ç¨‹çš„æ ·å¼
      let selectedElement;
      if (courseName === 'é«˜ç­‰æ•°å­¦ï¼ˆä¸Šï¼‰') {
        selectedElement = document.getElementById('course-math');
      } else if (courseName === 'å¤§å­¦ç‰©ç†') {
        selectedElement = document.getElementById('course-physics');
      } else if (courseName === 'è®¡ç®—æœºå¯¼è®º') {
        selectedElement = document.getElementById('course-computer');
      }

      if (selectedElement) {
        selectedElement.style.border = '2px solid var(--primary)';
        selectedElement.style.background = 'linear-gradient(135deg, #f0f9ff, #e0f2fe)';
        
        // æ·»åŠ é€‰ä¸­æç¤º
        const indicator = document.createElement('div');
        indicator.style.cssText = 'margin-top:4px;font-size:10px;color:var(--primary)';
        indicator.textContent = 'â— å½“å‰é€‰ä¸­';
        selectedElement.appendChild(indicator);
      }
    }

    function updateLearningPathContent(courseName) {
      const pathData = learningPathData[courseName];
      if (!pathData) return;

      // æ›´æ–°æ ‡é¢˜
      document.getElementById('pathTitle').textContent = `å­¦ä¹ è·¯å¾„ Â· ${courseName}`;
      document.getElementById('enterClassroomBtn').href = `liveroom_off.html?course=${encodeURIComponent(courseName)}&mode=live&from=schedule&status=not-started`;

      // æ›´æ–°æ¨èå†…å®¹
      document.getElementById('recommendationText').textContent = pathData.recommendation.text;
      
      const buttonsContainer = document.getElementById('recommendationButtons');
      buttonsContainer.innerHTML = pathData.recommendation.buttons.map(btn => 
        `<button onclick="${btn.topic === 'ç»¼åˆ' ? 'showDailyMixedQuestions()' : `showRecommendedQuestions('${btn.topic}')`}" style="background:${btn.color};color:#fff;border:none;border-radius:16px;padding:4px 10px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px">
          <span>${btn.icon}</span>${btn.label}
        </button>`
      ).join('');

      // æ›´æ–°å­¦ä¹ èŠ‚ç‚¹
      const nodesContainer = document.getElementById('learningPathNodes');
      nodesContainer.innerHTML = pathData.nodes.map(node => 
        `<div style="border:1px dashed var(--border);border-radius:10px;padding:12px;background:#fafafa${node.color === '#ef4444' ? ';position:relative' : ''}">
          <div style="font-weight:600">${node.name}</div>
          <div style="color:${node.color};font-size:12px;margin-top:6px">${node.status}</div>
          <div style="margin-top:8px;display:flex;flex-direction:column;gap:4px">
            ${node.links.map(link => `<a href="${link.href}" style="font-size:12px${link.href.includes('mode=live') && !link.href.includes('status=not-started') ? ';color:var(--primary);text-decoration:none' : ''}">${link.text}</a>`).join('')}
            <button onclick="${node.action}" style="background:${node.color === '#16a34a' ? '#22c55e' : node.color === '#ef4444' ? 'var(--primary)' : node.color};color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:11px;cursor:pointer">${node.color === '#16a34a' ? 'ğŸ¯ å·©å›ºç»ƒä¹ ' : node.color === '#ef4444' ? 'ğŸ“ ä¸“é¡¹ç»ƒä¹ ' : 'ğŸ“š æå‡ç»ƒä¹ '}</button>
          </div>
          ${node.color === '#ef4444' ? '<div style="position:absolute;top:8px;right:8px;background:#ef4444;color:#fff;border-radius:50%;width:16px;height:16px;font-size:10px;display:flex;align-items:center;justify-content:center">!</div>' : ''}
        </div>`
      ).join('');

      

      // æ›´æ–°æ—¥ç¨‹å†…å®¹
      const scheduleContainer = document.getElementById('scheduleContent');
      scheduleContainer.innerHTML = `
        <div style="font-size:16px;color:#0369a1;margin-bottom:12px;font-weight:600;display:flex;align-items:center;gap:8px">
          <span>ğŸ“Š</span> æœ¬å‘¨ç”Ÿæˆè®¡åˆ’
        </div>
        <div style="font-size:14px;color:var(--text);line-height:1.8;padding-left:8px">
          ${pathData.schedule.map(item => 
            `<div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
              <span style="width:6px;height:6px;background:${item.color};border-radius:50%"></span>
              <span><strong>${item.name}</strong>ï¼š${item.time}</span>
            </div>`
          ).join('')}
        </div>
      `;
    }

    function switchLearningPath(courseName) {
      currentCourse = courseName;
      updateCourseSelection(courseName);
      updateLearningPathContent(courseName);
      console.log(`åˆ‡æ¢åˆ°è¯¾ç¨‹: ${courseName}`);
    }

    // æ›´æ–°ç­›é€‰å™¨é€‰é¡¹æ ¹æ®å½“å‰è§†å›¾
    function updateFilterOptions(viewType) {
      const statusFilter = document.getElementById('statusFilter');
      if (!statusFilter) return;

      let options = '';
      
      switch(viewType) {
        case 'tasks':
          options = `
            <option value="all">æ‰€æœ‰çŠ¶æ€</option>
            <option value="status-blue">æœªå®Œæˆ</option>
            <option value="status-gray">å·²å®Œæˆ</option>
          `;
          statusFilter.style.display = 'inline-block';
          statusFilter.disabled = false;
          break;
        case 'inbox':
          options = `
            <option value="all">æ‰€æœ‰çŠ¶æ€</option>
            <option value="status-blue">æœªè¯»</option>
            <option value="status-gray">å·²è¯»</option>
          `;
          statusFilter.style.display = 'inline-block';
          statusFilter.disabled = false;
          break;
        case 'schedule':
        case 'courses':
        case 'path':
        case 'today':
        default:
          // è¯¾è¡¨ã€è¯¾ç¨‹åˆ—è¡¨ã€å­¦ä¹ è·¯å¾„å’Œä»Šæ—¥äº‹é¡¹è§†å›¾ä¸æ˜¾ç¤ºç­›é€‰å™¨
          statusFilter.style.display = 'none';
          options = `<option value="all">æ‰€æœ‰çŠ¶æ€</option>`;
          break;
      }
      
      statusFilter.innerHTML = options;
      // é‡ç½®ä¸º"æ‰€æœ‰çŠ¶æ€"å¹¶æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®
      statusFilter.value = 'all';
      resetAllItemsDisplay();
    }

    // é‡ç½®æ‰€æœ‰é¡¹ç›®æ˜¾ç¤ºçŠ¶æ€
    function resetAllItemsDisplay() {
      // é‡ç½®ä»»åŠ¡
      document.querySelectorAll('#tasksView .item').forEach(item => {
        item.style.display = 'flex';
      });
      
      // é‡ç½®æ”¶ä»¶ç®±
      document.querySelectorAll('#inboxView .item').forEach(item => {
        item.style.display = 'flex';
      });
    }

    // çŠ¶æ€ç­›é€‰åŠŸèƒ½
    function filterByStatus() {
      const filterValue = document.getElementById('statusFilter').value;
      
      // å¦‚æœé€‰æ‹©"æ‰€æœ‰çŠ¶æ€"ï¼Œé‡ç½®æ˜¾ç¤ºå¹¶è¿”å›
      if (filterValue === 'all') {
        resetAllItemsDisplay();
        console.log('å·²é‡ç½®æ‰€æœ‰ç­›é€‰ï¼Œæ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®');
        return;
      }
      
      // æ£€æµ‹å½“å‰è§†å›¾
      const tasksView = document.getElementById('tasksView');
      const inboxView = document.getElementById('inboxView');
      
      if (tasksView && tasksView.style.display !== 'none') {
        // æˆ‘çš„ä»»åŠ¡è§†å›¾ç­›é€‰
        const allTasks = document.querySelectorAll('#tasksView .item');
        allTasks.forEach(task => {
          const statusSpan = task.querySelector('.status');
          if (statusSpan && statusSpan.classList.contains(filterValue)) {
            task.style.display = 'flex';
          } else {
            task.style.display = 'none';
          }
        });
        console.log(`ä»»åŠ¡ç­›é€‰: ${filterValue}`);
      } else if (inboxView && inboxView.style.display !== 'none') {
        // æ”¶ä»¶ç®±è§†å›¾ç­›é€‰
        const allMails = document.querySelectorAll('#inboxView .item');
        allMails.forEach(mail => {
          const statusSpan = mail.querySelector('.status');
          if (statusSpan && statusSpan.classList.contains(filterValue)) {
            mail.style.display = 'flex';
          } else {
            mail.style.display = 'none';
          }
        });
        console.log(`æ”¶ä»¶ç®±ç­›é€‰: ${filterValue}`);
      }
    }
  </script>
  <script src="ai-widget.js"></script>
</body>
</html>


